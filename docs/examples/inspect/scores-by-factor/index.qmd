



```{python}
from inspect_viz import Data
from inspect_viz.plot import plot, legend
from inspect_viz.mark import Mark, bar_x, rule_y, frame
from inspect_viz.transform import sql, ci_bounds

evals = Data.from_file("evals.csv")

y_offset = 10

x_label = "Score"

ci = 0.95

colors = ["#3266ae", "#91b7e5"]

factor = "task_arg_hint"
factor_labels = [ 'No hint', 'Hint']

score = "score_overall_value"
stderr = "score_overall_stderr"

y = "model"


ci_lower, ci_upper = ci_bounds(
    ci, 
    score=score, 
    stderr=stderr
)


plot(
    frame("left", inset_top=5, inset_bottom=5),
    rule_y(
        evals,
        x=score,
        y=factor,
        fy=y,
        sort= { "fy": "-x" },
        stroke=sql(f"IF(NOT {factor}, '{factor_labels[0]}', '{factor_labels[1]}')"),
        stroke_width=3,
        stroke_linecap="round",
        marker_end="circle",
        tip=True,
        channels= {
            "Hint": factor,
            "Model": y,
            "Score": score,
            "Stderr": stderr
        }
    ),
    rule_y(
        evals,
        x1=ci_lower,
        x2=ci_upper,
        y=factor,
        fy=y,
        sort= { "fy": "-x" },
        stroke=f"{colors[0]}20",
        stroke_width=15,
    ),
    legend=legend("color", target=evals.selection),
    margin_left=100,
    y_label=None,
    y_ticks=[],
    x_label=x_label,
    color_domain=factor_labels,
    color_range=colors,
    y_tick_size=0,
    fy_label=None,
    fy_axis="left"
)

```
