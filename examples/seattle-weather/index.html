<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Seattle Weather â€“ Inspect Viz</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../examples/athletes-regression/index.html" rel="next">
<link href="../../examples/bias-parameter/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-e1c87ef72309dee44858cc0136017002.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>


</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Inspect Viz</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Getting Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../concepts.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../reference/index.html"> 
<span class="menu-text">Reference</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../examples/index.html" aria-current="page"> 
<span class="menu-text">Examples</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/inspect_viz"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../examples/seattle-weather/index.html">Seattle Weather</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/penguins/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Penguins Explorer</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/bias-parameter/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bias Parameter</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/seattle-weather/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Seattle Weather</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/athletes-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Athletes (Regression)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples/athletes-errorbars/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Athletes (Error Bars)</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Seattle Weather</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Select a horizontal range on the dot pot to filter the contents of the bar plot. Click the legend or the bar plot to filter by weather conditions.</p>
<div id="b033b832" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"6bd8a37334a5421683dde6cdb82082d7","version_major":2,"version_minor":1,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
<div id="a13cee47" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"74557e9ec7914b5a9364f1a7c7634e3e","version_major":2,"version_minor":1,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>


<!-- -->


</main> <!-- /main -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{"09c2c30a1d894ee79c9371a31443ba43":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"0df1368af23e4f02a8e9ade6700be614":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"272fec5014524f7b8ad45206772808ef":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"28cc94bff6b74896a6d1c2d9b5784dc2":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"2ca51a08caa14532a54d963d8534706a":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"303df0e9fdf24b7494ac91682132a553":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz._core.component.Component","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_09c2c30a1d894ee79c9371a31443ba43","spec":"","tabbable":null,"tables":{},"tooltip":null}},"31bd2b26023e4deeb4b461b59bc6cc81":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.mark._mark.Mark","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_0df1368af23e4f02a8e9ade6700be614","spec":"","tabbable":null,"tables":{},"tooltip":null}},"3d667757c8284e249e39f11f081e46e6":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.interactor._interactors.Interactor","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_81cd1efae2014711a859b33f36e98ba0","spec":"","tabbable":null,"tables":{},"tooltip":null}},"45efc6a6087341fa8b0de3abc8a385b5":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"4865eebb74234ee5aa579f2c747ed88b":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"66259286c18d4c00aaf8081ba2f9f214":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.mark._mark.Mark","_css":"\n\n.mosaic-widget fieldset {\n    display: inline-flex;\n    align-items: flex-start;\n    gap: 0.5rem;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n\n.mosaic-widget fieldset>label {\n    display: inline-flex;\n    align-items: center;\n}\n\n.mosaic-widget fieldset>label>input[type=\"radio\"] {\n    margin-right: 0.25rem;\n}\n\n.mosaic-widget fieldset>legend {\n    font-size: inherit;\n    margin: 0;\n}\n\n.mosaic-widget {\n    margin-top: 10px;\n    margin-bottom: 0.5rem;\n}\n\n.mosaic-widget label {\n    display: inline-flex;\n    align-items: center;\n    white-space: nowrap;\n}\n\n.mosaic-widget label>select,\n.mosaic-widget .input-search,\n.mosaic-widget .ts-wrapper,\nlabel>input[type=\"range\"] {\n    margin-left: 0.25rem;\n    margin-right: 0.5rem;\n}\n\n.mosaic-widget .input-search {\n    width: 150px;\n}\n\n.mosaic-widget label>input[type=\"range\"] {\n    margin-right: 0.25rem;\n}\n\n\n.mosaic-widget .slider-input {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    margin-right: 0.5rem;\n}\n\n.mosaic-widget .slider-input label {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.mosaic-widget .slider-input .noUi-target {\n    margin: 0;\n}\n\n.mosaic-widget .slider-input .slider-value {\n    margin: 0;\n}\n\n/* nouislider */\n\n.noUi-target,\n.noUi-target * {\n    -webkit-touch-callout: none;\n    -webkit-tap-highlight-color: transparent;\n    -webkit-user-select: none;\n    -ms-touch-action: none;\n    touch-action: none;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box\n}\n\n.noUi-target {\n    position: relative\n}\n\n.noUi-base,\n.noUi-connects {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    z-index: 1\n}\n\n.noUi-connects {\n    overflow: hidden;\n    z-index: 0\n}\n\n.noUi-connect,\n.noUi-origin {\n    will-change: transform;\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    right: 0;\n    height: 100%;\n    width: 100%;\n    -ms-transform-origin: 0 0;\n    -webkit-transform-origin: 0 0;\n    -webkit-transform-style: preserve-3d;\n    transform-origin: 0 0;\n    transform-style: flat\n}\n\n.noUi-txt-dir-rtl.noUi-horizontal .noUi-origin {\n    left: 0;\n    right: auto\n}\n\n.noUi-vertical .noUi-origin {\n    top: -100%;\n    width: 0\n}\n\n.noUi-horizontal .noUi-origin {\n    height: 0\n}\n\n.noUi-handle {\n    -webkit-backface-visibility: hidden;\n    backface-visibility: hidden;\n    position: absolute\n}\n\n.noUi-touch-area {\n    height: 100%;\n    width: 100%\n}\n\n.noUi-state-tap .noUi-connect,\n.noUi-state-tap .noUi-origin {\n    -webkit-transition: transform .3s;\n    transition: transform .3s\n}\n\n.noUi-state-drag * {\n    cursor: inherit !important\n}\n\n.noUi-horizontal {\n    height: 18px\n}\n\n.noUi-horizontal .noUi-handle {\n    width: 34px;\n    height: 28px;\n    right: -17px;\n    top: -6px\n}\n\n.noUi-vertical {\n    width: 18px\n}\n\n.noUi-vertical .noUi-handle {\n    width: 28px;\n    height: 34px;\n    right: -6px;\n    bottom: -17px\n}\n\n.noUi-txt-dir-rtl.noUi-horizontal .noUi-handle {\n    left: -17px;\n    right: auto\n}\n\n.noUi-target {\n    background: #FAFAFA;\n    border-radius: 4px;\n    border: 1px solid #D3D3D3;\n    box-shadow: inset 0 1px 1px #F0F0F0, 0 3px 6px -5px #BBB\n}\n\n.noUi-connects {\n    border-radius: 3px\n}\n\n.noUi-connect {\n    background: #3FB8AF\n}\n\n.noUi-draggable {\n    cursor: ew-resize\n}\n\n.noUi-vertical .noUi-draggable {\n    cursor: ns-resize\n}\n\n.noUi-handle {\n    border: 1px solid #D9D9D9;\n    border-radius: 3px;\n    background: #FFF;\n    cursor: default;\n    box-shadow: inset 0 0 1px #FFF, inset 0 1px 7px #EBEBEB, 0 3px 6px -3px #BBB\n}\n\n.noUi-active {\n    box-shadow: inset 0 0 1px #FFF, inset 0 1px 7px #DDD, 0 3px 6px -3px #BBB\n}\n\n.noUi-handle:after,\n.noUi-handle:before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    height: 14px;\n    width: 1px;\n    background: #E8E7E6;\n    left: 14px;\n    top: 6px\n}\n\n.noUi-handle:after {\n    left: 17px\n}\n\n.noUi-vertical .noUi-handle:after,\n.noUi-vertical .noUi-handle:before {\n    width: 14px;\n    height: 1px;\n    left: 6px;\n    top: 14px\n}\n\n.noUi-vertical .noUi-handle:after {\n    top: 17px\n}\n\n[disabled] .noUi-connect {\n    background: #B8B8B8\n}\n\n[disabled] .noUi-handle,\n[disabled].noUi-handle,\n[disabled].noUi-target {\n    cursor: not-allowed\n}\n\n.noUi-pips,\n.noUi-pips * {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box\n}\n\n.noUi-pips {\n    position: absolute;\n    color: #999\n}\n\n.noUi-value {\n    position: absolute;\n    white-space: nowrap;\n    text-align: center\n}\n\n.noUi-value-sub {\n    color: #ccc;\n    font-size: 10px\n}\n\n.noUi-marker {\n    position: absolute;\n    background: #CCC\n}\n\n.noUi-marker-sub {\n    background: #AAA\n}\n\n.noUi-marker-large {\n    background: #AAA\n}\n\n.noUi-pips-horizontal {\n    padding: 10px 0;\n    height: 80px;\n    top: 100%;\n    left: 0;\n    width: 100%\n}\n\n.noUi-value-horizontal {\n    -webkit-transform: translate(-50%, 50%);\n    transform: translate(-50%, 50%)\n}\n\n.noUi-rtl .noUi-value-horizontal {\n    -webkit-transform: translate(50%, 50%);\n    transform: translate(50%, 50%)\n}\n\n.noUi-marker-horizontal.noUi-marker {\n    margin-left: -1px;\n    width: 2px;\n    height: 5px\n}\n\n.noUi-marker-horizontal.noUi-marker-sub {\n    height: 10px\n}\n\n.noUi-marker-horizontal.noUi-marker-large {\n    height: 15px\n}\n\n.noUi-pips-vertical {\n    padding: 0 10px;\n    height: 100%;\n    top: 0;\n    left: 100%\n}\n\n.noUi-value-vertical {\n    -webkit-transform: translate(0, -50%);\n    transform: translate(0, -50%);\n    padding-left: 25px\n}\n\n.noUi-rtl .noUi-value-vertical {\n    -webkit-transform: translate(0, 50%);\n    transform: translate(0, 50%)\n}\n\n.noUi-marker-vertical.noUi-marker {\n    width: 5px;\n    height: 2px;\n    margin-top: -1px\n}\n\n.noUi-marker-vertical.noUi-marker-sub {\n    width: 10px\n}\n\n.noUi-marker-vertical.noUi-marker-large {\n    width: 15px\n}\n\n.noUi-tooltip {\n    display: block;\n    position: absolute;\n    border: 1px solid #D9D9D9;\n    border-radius: 3px;\n    background: #fff;\n    color: #000;\n    padding: 5px;\n    text-align: center;\n    white-space: nowrap\n}\n\n.noUi-horizontal .noUi-tooltip {\n    -webkit-transform: translate(-50%, 0);\n    transform: translate(-50%, 0);\n    left: 50%;\n    bottom: 120%\n}\n\n.noUi-vertical .noUi-tooltip {\n    -webkit-transform: translate(0, -50%);\n    transform: translate(0, -50%);\n    top: 50%;\n    right: 120%\n}\n\n.noUi-horizontal .noUi-origin>.noUi-tooltip {\n    -webkit-transform: translate(50%, 0);\n    transform: translate(50%, 0);\n    left: auto;\n    bottom: 10px\n}\n\n.noUi-vertical .noUi-origin>.noUi-tooltip {\n    -webkit-transform: translate(0, -18px);\n    transform: translate(0, -18px);\n    top: auto;\n    right: 28px\n}\n\n.noUi-round {\n    height: 10px;\n}\n\n.noUi-round .noUi-connect {\n    background: #c0392b;\n}\n\n.noUi-round .noUi-handle {\n    height: 18px;\n    width: 18px;\n    top: -5px;\n    right: -9px;\n    /* half the width */\n    border-radius: 9px;\n}\n\n.bslib-sidebar-layout .collapse-toggle {\n    right: 0;\n}\n\n.toolbar {\n    row-gap: 0.7rem;\n}\n\n.panel-input {\n    display: inline-block;\n}\n\n.toolbar .mosaic-widget,\n.panel-input .mosaic-widget {\n    margin-top: 0;\n    margin-bottom: 0;\n}\n\n\n.sidebar .mosaic-widget fieldset>legend,\n.panel-sidebar .mosaic-widget fieldset>legend {\n    margin-bottom: 0.2rem;\n}\n\n.sidebar .mosaic-widget label>select,\n.panel-sidebar .mosaic-widget label>select,\n.sidebar .mosaic-widget .input-search,\n.panel-sidebar .mosaic-widget .input-search,\n.sidebar .mosaic-widget label>input[type=\"range\"],\n.panel-sidebar .mosaic-widget label>input[type=\"range\"],\n.panel-sidebar .mosaic-widget .ts-wrapper,\n.sidebar .mosaic-widget .ts-wrapper {\n    margin-left: 0;\n    margin-right: 0;\n}\n\n.panel-sidebar .mosaic-widget .sidebar-fullwidth,\n.sidebar .mosaic-widget .sidebar-fullwidth,\n.panel-sidebar .mosaic-widget .sidebar-fullwidth>*,\n.sidebar .mosaic-widget .sidebar-fullwidth>*,\n.sidebar .mosaic-widget .sidebar-fullwidth .ts-wrapper,\n.panel-sidebar .mosaic-widget .sidebar-fullwidth .ts-wrapper,\n.sidebar .mosaic-widget .sidebar-fullwidth .slider-input,\n.panel-sidebar .mosaic-widget .sidebar-fullwidth .slider-input {\n    width: 100%;\n}\n\n.panel-sidebar .mosaic-widget .sidebar-fullwidth .noUi-target,\n.sidebar .mosaic-widget .sidebar-fullwidth .noUi-target {\n    width: 96% !important;\n}\n\n.sidebar .mosaic-widget fieldset,\n.panel-sidebar .mosaic-widget fieldset,\n.sidebar .mosaic-widget .sidebar-fullwidth label,\n.panel-sidebar .mosaic-widget .sidebar-fullwidth label,\n.sidebar .mosaic-widget .slider-input,\n.panel-sidebar .mosaic-widget .slider-input {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.1rem;\n}\n\n.mosaic-widget>div>div>label {\n    min-height: 40px;\n}\n\n.mosaic-widget .input-search {\n    padding: .375rem .75rem;\n    border: 1px solid var(--bs-border-color);\n    border-radius: var(--bs-border-radius);\n}\n\n/* remove small top and bottom margin when widgets appear in cards */\n.card-body .mosaic-widget {\n    margin: 0;\n}\n\n/* remove border from ag-grid wrapper (table) when in card */\n.card-body .mosaic-widget .ag-root-wrapper {\n    border: none;\n}\n\n.card-body .mosaic-widget .inspect-viz-table {\n    height: 100%;\n}\n\n.mosaic-widget .inspect-viz-table {\n    --ag-foreground-color: var(--bs-body-color);\n    --ag-background-color: var(--bs-body-bg);\n    --ag-accent-color: var(--bs-primary);\n    --ag-font-family: var(--bs-font-sans-serif);\n    --ag-font-size: var(--bs-font-size-base);\n\n\n}\n\n.ts-control {\n    border: 1px solid var(--bs-border-color);\n    border-radius: var(--bs-border-radius);\n    box-shadow: none;\n    box-sizing: border-box;\n    flex-wrap: wrap;\n    overflow: hidden;\n    padding: .375rem .75rem;\n    position: relative;\n    width: 100%;\n    z-index: 1\n}\n\n.ts-wrapper.multi.has-items .ts-control {\n    padding: calc(.375rem - 1px) .75rem calc(.375rem - 4px)\n}\n\n.full .ts-control {\n    background-color: var(--bs-body-bg)\n}\n\n.disabled .ts-control,\n.disabled .ts-control * {\n    cursor: default !important\n}\n\n.focus .ts-control {\n    box-shadow: none\n}\n\n.ts-control>* {\n    display: inline-block;\n    vertical-align: initial\n}\n\n.ts-wrapper.multi .ts-control>div {\n    background: #efefef;\n    border: 0 solid #dee2e6;\n    color: #343a40;\n    cursor: pointer;\n    margin: 0 3px 3px 0;\n    padding: 1px 5px\n}\n\n.ts-wrapper.multi .ts-control>div.active {\n    background: #0d6efd;\n    border: 0 solid transparent;\n    color: #fff\n}\n\n.ts-wrapper.multi.disabled .ts-control>div,\n.ts-wrapper.multi.disabled .ts-control>div.active {\n    background: #fff;\n    border: 0 solid #fff;\n    color: #878787\n}\n\n.ts-control>input {\n    background: none !important;\n    border: 0 !important;\n    box-shadow: none !important;\n    display: inline-block !important;\n    flex: 1 1 auto;\n    line-height: inherit !important;\n    margin: 0 !important;\n    max-height: none !important;\n    max-width: 100% !important;\n    min-height: 0 !important;\n    min-width: 7rem;\n    padding: 0 !important;\n    text-indent: 0 !important;\n    -webkit-user-select: auto !important;\n    -moz-user-select: auto !important;\n    -ms-user-select: auto !important;\n    user-select: auto !important\n}\n\n.ts-control>input::-ms-clear {\n    display: none\n}\n\n.ts-control>input:focus {\n    outline: none !important\n}\n\n.has-items .ts-control>input {\n    margin: 0 4px !important\n}\n\n.ts-control.rtl {\n    text-align: right\n}\n\n.ts-control.rtl.single .ts-control:after {\n    left: calc(.75rem + 5px);\n    right: auto\n}\n\n.ts-control.rtl .ts-control>input {\n    margin: 0 4px 0 -2px !important\n}\n\n.disabled .ts-control {\n    background-color: var(--bs-secondary-bg);\n    opacity: .5\n}\n\n.input-hidden .ts-control>input {\n    left: -10000px;\n    opacity: 0;\n    position: absolute\n}\n\n.ts-dropdown {\n    background: var(--bs-body-bg);\n    border: 1px solid #d0d0d0;\n    border-radius: 0 0 var(--bs-border-radius) var(--bs-border-radius);\n    border-top: 0;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, .1);\n    box-sizing: border-box;\n    left: 0;\n    margin: .25rem 0 0;\n    position: absolute;\n    top: 100%;\n    width: 100%;\n    z-index: 10\n}\n\n.ts-dropdown [data-selectable] {\n    cursor: pointer;\n    overflow: hidden\n}\n\n.ts-dropdown [data-selectable] .highlight {\n    background: rgba(255, 237, 40, .4);\n    border-radius: 1px\n}\n\n.ts-dropdown .create,\n.ts-dropdown .no-results,\n.ts-dropdown .optgroup-header,\n.ts-dropdown .option {\n    padding: 3px .75rem\n}\n\n.ts-dropdown .option,\n.ts-dropdown [data-disabled],\n.ts-dropdown [data-disabled] [data-selectable].option {\n    cursor: inherit;\n    opacity: .5\n}\n\n.ts-dropdown [data-selectable].option {\n    cursor: pointer;\n    opacity: 1\n}\n\n.ts-dropdown .optgroup:first-child .optgroup-header {\n    border-top: 0\n}\n\n.ts-dropdown .optgroup-header {\n    background: var(--bs-body-bg);\n    color: #6c757d;\n    cursor: default\n}\n\n.ts-dropdown .active {\n    background-color: var(--bs-tertiary-bg)\n}\n\n.ts-dropdown .active,\n.ts-dropdown .active.create {\n    color: var(--bs-body-color)\n}\n\n.ts-dropdown .create {\n    color: rgba(52, 58, 64, .5)\n}\n\n.ts-dropdown .spinner {\n    display: inline-block;\n    height: 30px;\n    margin: 3px .75rem;\n    width: 30px\n}\n\n.ts-dropdown .spinner:after {\n    animation: lds-dual-ring 1.2s linear infinite;\n    border-color: #d0d0d0 transparent;\n    border-radius: 50%;\n    border-style: solid;\n    border-width: 5px;\n    content: \" \";\n    display: block;\n    height: 24px;\n    margin: 3px;\n    width: 24px\n}\n\n@keyframes lds-dual-ring {\n    0% {\n        transform: rotate(0deg)\n    }\n\n    to {\n        transform: rotate(1turn)\n    }\n}\n\n.ts-dropdown-content {\n    max-height: 200px;\n    overflow: hidden auto;\n    scroll-behavior: smooth\n}\n\n.ts-wrapper.plugin-drag_drop .ts-dragging {\n    color: transparent !important\n}\n\n.ts-wrapper.plugin-drag_drop .ts-dragging>* {\n    visibility: hidden !important\n}\n\n.plugin-checkbox_options:not(.rtl) .option input {\n    margin-right: .5rem\n}\n\n.plugin-checkbox_options.rtl .option input {\n    margin-left: .5rem\n}\n\n.plugin-clear_button {\n    --ts-pr-clear-button: 1em\n}\n\n.plugin-clear_button .clear-button {\n    background: transparent !important;\n    cursor: pointer;\n    margin-right: 0 !important;\n    opacity: 0;\n    position: absolute;\n    right: calc(.75rem - 5px);\n    top: 50%;\n    transform: translateY(-50%);\n    transition: opacity .5s\n}\n\n.plugin-clear_button.form-select .clear-button,\n.plugin-clear_button.single .clear-button {\n    right: max(var(--ts-pr-caret), .75rem)\n}\n\n.plugin-clear_button.focus.has-items .clear-button,\n.plugin-clear_button:not(.disabled):hover.has-items .clear-button {\n    opacity: 1\n}\n\n.ts-wrapper .dropdown-header {\n    background: color-mix(var(--bs-body-bg), #d0d0d0, 85%);\n    border-bottom: 1px solid #d0d0d0;\n    border-radius: var(--bs-border-radius) var(--bs-border-radius) 0 0;\n    padding: 6px .75rem;\n    position: relative\n}\n\n.ts-wrapper .dropdown-header-close {\n    color: #343a40;\n    font-size: 20px !important;\n    line-height: 20px;\n    margin-top: -12px;\n    opacity: .4;\n    position: absolute;\n    right: .75rem;\n    top: 50%\n}\n\n.ts-wrapper .dropdown-header-close:hover {\n    color: #000\n}\n\n.plugin-dropdown_input.focus.dropdown-active .ts-control {\n    border: 1px solid var(--bs-border-color);\n    box-shadow: none;\n    box-shadow: var(--bs-box-shadow-inset)\n}\n\n.plugin-dropdown_input .dropdown-input {\n    background: transparent;\n    border: solid #d0d0d0;\n    border-width: 0 0 1px;\n    box-shadow: none;\n    display: block;\n    padding: .375rem .75rem;\n    width: 100%\n}\n\n.plugin-dropdown_input.focus .ts-dropdown .dropdown-input {\n    border-color: #86b7fe;\n    box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .25);\n    outline: 0\n}\n\n.plugin-dropdown_input .items-placeholder {\n    border: 0 !important;\n    box-shadow: none !important;\n    width: 100%\n}\n\n.plugin-dropdown_input.dropdown-active .items-placeholder,\n.plugin-dropdown_input.has-items .items-placeholder {\n    display: none !important\n}\n\n.ts-wrapper.plugin-input_autogrow.has-items .ts-control>input {\n    min-width: 0\n}\n\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input {\n    flex: none;\n    min-width: 4px\n}\n\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input::-ms-input-placeholder {\n    color: transparent\n}\n\n.ts-wrapper.plugin-input_autogrow.has-items.focus .ts-control>input::placeholder {\n    color: transparent\n}\n\n.ts-dropdown.plugin-optgroup_columns .ts-dropdown-content {\n    display: flex\n}\n\n.ts-dropdown.plugin-optgroup_columns .optgroup {\n    border-right: 1px solid #f2f2f2;\n    border-top: 0;\n    flex-basis: 0;\n    flex-grow: 1;\n    min-width: 0\n}\n\n.ts-dropdown.plugin-optgroup_columns .optgroup:last-child {\n    border-right: 0\n}\n\n.ts-dropdown.plugin-optgroup_columns .optgroup:before {\n    display: none\n}\n\n.ts-dropdown.plugin-optgroup_columns .optgroup-header {\n    border-top: 0\n}\n\n.ts-wrapper.plugin-remove_button .item {\n    align-items: center;\n    display: inline-flex\n}\n\n.ts-wrapper.plugin-remove_button .item .remove {\n    border-radius: 0 2px 2px 0;\n    box-sizing: border-box;\n    color: inherit;\n    display: inline-block;\n    padding: 0 5px;\n    text-decoration: none;\n    vertical-align: middle\n}\n\n.ts-wrapper.plugin-remove_button .item .remove:hover {\n    background: rgba(0, 0, 0, .05)\n}\n\n.ts-wrapper.plugin-remove_button.disabled .item .remove:hover {\n    background: none\n}\n\n.ts-wrapper.plugin-remove_button .remove-single {\n    font-size: 23px;\n    position: absolute;\n    right: 0;\n    top: 0\n}\n\n.ts-wrapper.plugin-remove_button:not(.rtl) .item {\n    padding-right: 0 !important\n}\n\n.ts-wrapper.plugin-remove_button:not(.rtl) .item .remove {\n    border-left: 1px solid #dee2e6;\n    margin-left: 5px\n}\n\n.ts-wrapper.plugin-remove_button:not(.rtl) .item.active .remove {\n    border-left-color: transparent\n}\n\n.ts-wrapper.plugin-remove_button:not(.rtl).disabled .item .remove {\n    border-left-color: #fff\n}\n\n.ts-wrapper.plugin-remove_button.rtl .item {\n    padding-left: 0 !important\n}\n\n.ts-wrapper.plugin-remove_button.rtl .item .remove {\n    border-right: 1px solid #dee2e6;\n    margin-right: 5px\n}\n\n.ts-wrapper.plugin-remove_button.rtl .item.active .remove {\n    border-right-color: transparent\n}\n\n.ts-wrapper.plugin-remove_button.rtl.disabled .item .remove {\n    border-right-color: #fff\n}\n\n:root {\n    --ts-pr-clear-button: 0px;\n    --ts-pr-caret: 0px;\n    --ts-pr-min: .75rem\n}\n\n.ts-wrapper.single .ts-control,\n.ts-wrapper.single .ts-control input {\n    cursor: pointer\n}\n\n.ts-control:not(.rtl) {\n    padding-right: max(var(--ts-pr-min), var(--ts-pr-clear-button) + var(--ts-pr-caret)) !important\n}\n\n.ts-control.rtl {\n    padding-left: max(var(--ts-pr-min), var(--ts-pr-clear-button) + var(--ts-pr-caret)) !important\n}\n\n.ts-wrapper {\n    position: relative\n}\n\n.ts-control,\n.ts-control input,\n.ts-dropdown {\n    color: #343a40;\n    font-family: inherit;\n    font-size: inherit;\n    line-height: 1.5\n}\n\n.ts-control,\n.ts-wrapper.single.input-active .ts-control {\n    background: var(--bs-body-bg);\n    cursor: text\n}\n\n.ts-hidden-accessible {\n    border: 0 !important;\n    clip: rect(0 0 0 0) !important;\n    -webkit-clip-path: inset(50%) !important;\n    clip-path: inset(50%) !important;\n    overflow: hidden !important;\n    padding: 0 !important;\n    position: absolute !important;\n    white-space: nowrap !important;\n    width: 1px !important\n}\n\n.ts-dropdown,\n.ts-dropdown.form-control,\n.ts-dropdown.form-select {\n    background: var(--bs-body-bg);\n    border: 1px solid var(--bs-border-color-translucent);\n    border-radius: .375rem;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, .175);\n    height: auto;\n    padding: 0;\n    z-index: 1000\n}\n\n.ts-dropdown .optgroup-header {\n    font-size: .875rem;\n    line-height: 1.5\n}\n\n.ts-dropdown .optgroup:first-child:before {\n    display: none\n}\n\n.ts-dropdown .optgroup:before {\n    border-top: 1px solid var(--bs-border-color-translucent);\n    content: \" \";\n    display: block;\n    height: 0;\n    margin: .5rem -.75rem;\n    overflow: hidden\n}\n\n.ts-dropdown .create {\n    padding-left: .75rem\n}\n\n.ts-dropdown-content {\n    padding: 5px 0\n}\n\n.ts-control {\n    align-items: center;\n    display: flex;\n    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out\n}\n\n@media (prefers-reduced-motion:reduce) {\n    .ts-control {\n        transition: none\n    }\n}\n\n.focus .ts-control {\n    border-color: #86b7fe;\n    box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .25);\n    outline: 0\n}\n\n.ts-control .item {\n    align-items: center;\n    display: flex\n}\n\n.ts-wrapper.is-invalid,\n.was-validated .invalid,\n.was-validated :invalid+.ts-wrapper {\n    border-color: var(--bs-form-invalid-color)\n}\n\n.ts-wrapper.is-invalid:not(.single),\n.was-validated .invalid:not(.single),\n.was-validated :invalid+.ts-wrapper:not(.single) {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E\");\n    background-position: right calc(.375em + .1875rem) center;\n    background-repeat: no-repeat;\n    background-size: calc(.75em + .375rem) calc(.75em + .375rem)\n}\n\n.ts-wrapper.is-invalid.single,\n.was-validated .invalid.single,\n.was-validated :invalid+.ts-wrapper.single {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3E%3C/svg%3E\"), url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3E%3Ccircle cx='6' cy='6' r='4.5'/%3E%3Cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3E%3Ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3E%3C/svg%3E\");\n    background-position: right .75rem center, center right 2.25rem;\n    background-repeat: no-repeat;\n    background-size: 16px 12px, calc(.75em + .375rem) calc(.75em + .375rem)\n}\n\n.ts-wrapper.is-invalid.focus .ts-control,\n.was-validated .invalid.focus .ts-control,\n.was-validated :invalid+.ts-wrapper.focus .ts-control {\n    border-color: var(--bs-form-invalid-color);\n    box-shadow: 0 0 0 .25rem rgba(var(--bs-form-invalid-color), .25)\n}\n\n.ts-wrapper.is-valid,\n.was-validated .valid,\n.was-validated :valid+.ts-wrapper {\n    border-color: var(--bs-form-valid-color)\n}\n\n.ts-wrapper.is-valid:not(.single),\n.was-validated .valid:not(.single),\n.was-validated :valid+.ts-wrapper:not(.single) {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3E%3Cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1'/%3E%3C/svg%3E\");\n    background-position: right calc(.375em + .1875rem) center;\n    background-repeat: no-repeat;\n    background-size: calc(.75em + .375rem) calc(.75em + .375rem)\n}\n\n.ts-wrapper.is-valid.single,\n.was-validated .valid.single,\n.was-validated :valid+.ts-wrapper.single {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3E%3C/svg%3E\"), url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3E%3Cpath fill='%23198754' d='M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1'/%3E%3C/svg%3E\");\n    background-position: right .75rem center, center right 2.25rem;\n    background-repeat: no-repeat;\n    background-size: 16px 12px, calc(.75em + .375rem) calc(.75em + .375rem)\n}\n\n.ts-wrapper.is-valid.focus .ts-control,\n.was-validated .valid.focus .ts-control,\n.was-validated :valid+.ts-wrapper.focus .ts-control {\n    border-color: var(--bs-form-valid-color);\n    box-shadow: 0 0 0 .25rem rgba(var(--bs-form-valid-color), .25)\n}\n\n.ts-wrapper {\n    display: flex;\n    min-height: calc(1.5em + .75rem + var(--bs-border-width)*2)\n}\n\n.input-group-sm>.ts-wrapper,\n.ts-wrapper.form-control-sm,\n.ts-wrapper.form-select-sm {\n    min-height: calc(1.5em + .5rem + var(--bs-border-width)*2)\n}\n\n.input-group-sm>.ts-wrapper .ts-control,\n.ts-wrapper.form-control-sm .ts-control,\n.ts-wrapper.form-select-sm .ts-control {\n    border-radius: var(--bs-border-radius-sm);\n    font-size: .875rem\n}\n\n.input-group-sm>.ts-wrapper.has-items .ts-control,\n.ts-wrapper.form-control-sm.has-items .ts-control,\n.ts-wrapper.form-select-sm.has-items .ts-control {\n    font-size: .875rem;\n    padding-bottom: 0\n}\n\n.input-group-sm>.ts-wrapper.multi.has-items .ts-control,\n.ts-wrapper.form-control-sm.multi.has-items .ts-control,\n.ts-wrapper.form-select-sm.multi.has-items .ts-control {\n    padding-top: calc(.75em - .40625rem + var(--bs-border-width)*2/2 - (var(--bs-border-width) + 1px)*2/2) !important\n}\n\n.ts-wrapper.multi.has-items .ts-control {\n    padding-left: calc(.75rem - 5px);\n    --ts-pr-min: calc(0.75rem - 5px)\n}\n\n.ts-wrapper.multi .ts-control>div {\n    border-radius: calc(var(--bs-border-radius) - 1px)\n}\n\n.input-group-lg>.ts-wrapper,\n.ts-wrapper.form-control-lg,\n.ts-wrapper.form-select-lg {\n    min-height: calc(1.5em + 1rem + var(--bs-border-width)*2)\n}\n\n.input-group-lg>.ts-wrapper .ts-control,\n.ts-wrapper.form-control-lg .ts-control,\n.ts-wrapper.form-select-lg .ts-control {\n    border-radius: var(--bs-border-radius-lg);\n    font-size: 1.25rem\n}\n\n.ts-wrapper:not(.form-control, .form-select) {\n    background: none;\n    border: none;\n    box-shadow: none;\n    height: auto;\n    padding: 0\n}\n\n.ts-wrapper:not(.form-control, .form-select).single .ts-control {\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3E%3C/svg%3E\");\n    background-position: right .75rem center;\n    background-repeat: no-repeat;\n    background-size: 16px 12px\n}\n\n.ts-wrapper.form-select,\n.ts-wrapper.single {\n    --ts-pr-caret: 2.25rem\n}\n\n.ts-wrapper.form-control,\n.ts-wrapper.form-select {\n    box-shadow: none;\n    display: flex;\n    height: auto;\n    padding: 0 !important\n}\n\n.ts-wrapper.form-control .ts-control,\n.ts-wrapper.form-control.single.input-active .ts-control,\n.ts-wrapper.form-select .ts-control,\n.ts-wrapper.form-select.single.input-active .ts-control {\n    border: none !important\n}\n\n.ts-wrapper.form-control:not(.disabled) .ts-control,\n.ts-wrapper.form-control:not(.disabled).single.input-active .ts-control,\n.ts-wrapper.form-select:not(.disabled) .ts-control,\n.ts-wrapper.form-select:not(.disabled).single.input-active .ts-control {\n    background: transparent !important\n}\n\n.input-group>.ts-wrapper {\n    flex-grow: 1;\n    width: 1%\n}\n\n.input-group>.ts-wrapper:not(:nth-child(2))>.ts-control {\n    border-bottom-left-radius: 0;\n    border-top-left-radius: 0\n}\n\n.input-group>.ts-wrapper:not(:last-child)>.ts-control {\n    border-bottom-right-radius: 0;\n    border-top-right-radius: 0\n}\n\n.ts-wrapper.single {\n    cursor: pointer !important;\n}\n\n.ts-wrapper.single.input-active .ts-control {\n    cursor: pointer !important;\n}\n\n.ts-control {\n    min-width: 150px;\n}\n\n.ts-dropdown.single {\n    width: auto !important;\n    min-width: 150px !important;\n}\n\n.ts-control>input {\n    min-width: 5rem;\n}\n\n.inspect-viz-table {\n    height: 295px;\n}\n\n.header-center .ag-header-cell-label {\n    justify-content: center;\n}\n\n.header-left .ag-header-cell-label {\n    justify-content: left;\n}\n\n.header-right .ag-header-cell-label {\n    justify-content: right;\n}\n\n.header-justify .ag-header-cell-label {\n    justify-content: space-between;\n}","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_28cc94bff6b74896a6d1c2d9b5784dc2","spec":"","tabbable":null,"tables":{},"tooltip":null}},"694769fec9704c63a788f80027132cef":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"6bd8a37334a5421683dde6cdb82082d7":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz._core.component.Component","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_45efc6a6087341fa8b0de3abc8a385b5","spec":"{\"hconcat\":[{\"plot\":[{\"mark\":\"dot\",\"data\":{\"from\":\"EszRsscXZ8t3UdWDjPmKzx\",\"filterBy\":\"$selection_5UUyc5gc2hSGoUHGWa9JuN\"},\"x\":{\"dateMonthDay\":\"date\"},\"y\":{\"column\":\"temp_max\"},\"r\":\"precipitation\",\"tip\":true,\"fill\":\"weather\",\"fillOpacity\":0.7},{\"select\":\"intervalX\",\"as\":\"$selection_4FXeTkid83ExNbu5gTvJfw\",\"brush\":{\"fill\":\"none\",\"stroke\":\"#888\"}},{\"select\":\"highlight\",\"by\":\"$selection_4FXeTkid83ExNbu5gTvJfw\",\"fill\":\"#ccc\",\"fillOpacity\":0.2}],\"width\":672,\"height\":384,\"xyDomain\":\"Fixed\",\"xTickFormat\":\"%b\",\"rDomain\":\"Fixed\",\"rRange\":[2,10],\"name\":\"plot_o3hctNhSMi5zzYRmdmbfXA\"},{\"legend\":\"color\",\"columns\":1,\"as\":\"$selection_5UUyc5gc2hSGoUHGWa9JuN\",\"for\":\"plot_o3hctNhSMi5zzYRmdmbfXA\",\"width\":80}],\"plotDefaults\":{\"colorDomain\":[\"sun\",\"fog\",\"drizzle\",\"rain\",\"snow\"],\"colorRange\":[\"#e7ba52\",\"#a7a7a7\",\"#aec7e8\",\"#1f77b4\",\"#9467bd\"]},\"params\":{\"selection_EszRsscXZ8t3UdWDjPmKzx\":{\"select\":\"intersect\"},\"selection_4FXeTkid83ExNbu5gTvJfw\":{\"select\":\"intersect\"},\"selection_5UUyc5gc2hSGoUHGWa9JuN\":{\"select\":\"single\"}}}","tabbable":null,"tables":{"EszRsscXZ8t3UdWDjPmKzx":"/////6AFAAAQAAAAAAAKAA4ABgAFAAgACgAAAAABBAAQAAAAAAAKAAwAAAAEAAgACgAAACwEAAAEAAAAAQAAAAwAAAAIAAwABAAIAAgAAAAEBAAABAAAAPcDAAB7ImluZGV4X2NvbHVtbnMiOiBbeyJraW5kIjogInJhbmdlIiwgIm5hbWUiOiBudWxsLCAic3RhcnQiOiAwLCAic3RvcCI6IDE0NjEsICJzdGVwIjogMX1dLCAiY29sdW1uX2luZGV4ZXMiOiBbeyJuYW1lIjogbnVsbCwgImZpZWxkX25hbWUiOiBudWxsLCAicGFuZGFzX3R5cGUiOiAidW5pY29kZSIsICJudW1weV90eXBlIjogIm9iamVjdCIsICJtZXRhZGF0YSI6IHsiZW5jb2RpbmciOiAiVVRGLTgifX1dLCAiY29sdW1ucyI6IFt7Im5hbWUiOiAiZGF0ZSIsICJmaWVsZF9uYW1lIjogImRhdGUiLCAicGFuZGFzX3R5cGUiOiAiZGF0ZSIsICJudW1weV90eXBlIjogIm9iamVjdCIsICJtZXRhZGF0YSI6IG51bGx9LCB7Im5hbWUiOiAicHJlY2lwaXRhdGlvbiIsICJmaWVsZF9uYW1lIjogInByZWNpcGl0YXRpb24iLCAicGFuZGFzX3R5cGUiOiAiZmxvYXQ2NCIsICJudW1weV90eXBlIjogImZsb2F0NjQiLCAibWV0YWRhdGEiOiBudWxsfSwgeyJuYW1lIjogInRlbXBfbWF4IiwgImZpZWxkX25hbWUiOiAidGVtcF9tYXgiLCAicGFuZGFzX3R5cGUiOiAiZmxvYXQ2NCIsICJudW1weV90eXBlIjogImZsb2F0NjQiLCAibWV0YWRhdGEiOiBudWxsfSwgeyJuYW1lIjogInRlbXBfbWluIiwgImZpZWxkX25hbWUiOiAidGVtcF9taW4iLCAicGFuZGFzX3R5cGUiOiAiZmxvYXQ2NCIsICJudW1weV90eXBlIjogImZsb2F0NjQiLCAibWV0YWRhdGEiOiBudWxsfSwgeyJuYW1lIjogIndpbmQiLCAiZmllbGRfbmFtZSI6ICJ3aW5kIiwgInBhbmRhc190eXBlIjogImZsb2F0NjQiLCAibnVtcHlfdHlwZSI6ICJmbG9hdDY0IiwgIm1ldGFkYXRhIjogbnVsbH0sIHsibmFtZSI6ICJ3ZWF0aGVyIiwgImZpZWxkX25hbWUiOiAid2VhdGhlciIsICJwYW5kYXNfdHlwZSI6ICJ1bmljb2RlIiwgIm51bXB5X3R5cGUiOiAib2JqZWN0IiwgIm1ldGFkYXRhIjogbnVsbH1dLCAiY3JlYXRvciI6IHsibGlicmFyeSI6ICJweWFycm93IiwgInZlcnNpb24iOiAiMjAuMC4wIn0sICJwYW5kYXNfdmVyc2lvbiI6ICIyLjMuMCJ9AAYAAABwYW5kYXMAAAYAAAAUAQAAzAAAAJgAAABkAAAANAAAAAQAAAAU////AAABBRAAAAAcAAAABAAAAAAAAAAHAAAAd2VhdGhlcgAEAAQABAAAAED///8AAAEDEAAAABgAAAAEAAAAAAAAAAQAAAB3aW5kAAAAADL///8AAAIAbP///wAAAQMQAAAAHAAAAAQAAAAAAAAACAAAAHRlbXBfbWluAAAAAGL///8AAAIAnP///wAAAQMQAAAAHAAAAAQAAAAAAAAACAAAAHRlbXBfbWF4AAAAAJL///8AAAIAzP///wAAAQMQAAAAIAAAAAQAAAAAAAAADQAAAHByZWNpcGl0YXRpb24AAADG////AAACABAAFAAIAAYABwAMAAAAEAAQAAAAAAABCBAAAAAcAAAABAAAAAAAAAAEAAAAZGF0ZQAABgAIAAYABgAAAAAAAAD/////iAEAABQAAAAAAAAADAAWAAYABQAIAAwADAAAAAADBAAYAAAA4PgAAAAAAAAAAAoAGAAMAAQACAAKAAAA7AAAABAAAAC1BQAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1BYAAAAAAADYFgAAAAAAAAAAAAAAAAAA2BYAAAAAAACoLQAAAAAAAIBEAAAAAAAAAAAAAAAAAACARAAAAAAAAKgtAAAAAAAAKHIAAAAAAAAAAAAAAAAAAChyAAAAAAAAqC0AAAAAAADQnwAAAAAAAAAAAAAAAAAA0J8AAAAAAACoLQAAAAAAAHjNAAAAAAAAAAAAAAAAAAB4zQAAAAAAANgWAAAAAAAAUOQAAAAAAACOFAAAAAAAAAAAAAAGAAAAtQUAAAAAAAAAAAAAAAAAALUFAAAAAAAAAAAAAAAAAAC1BQAAAAAAAAAAAAAAAAAAtQUAAAAAAAAAAAAAAAAAALUFAAAAAAAAAAAAAAAAAAC1BQAAAAAAAAAAAAAAAAAA7DsAAO07AADuOwAA7zsAAPA7AADxOwAA8jsAAPM7AAD0OwAA9TsAAPY7AAD3OwAA+DsAAPk7AAD6OwAA+zsAAPw7AAD9OwAA/jsAAP87AAAAPAAAATwAAAI8AAADPAAABDwAAAU8AAAGPAAABzwAAAg8AAAJPAAACjwAAAs8AAAMPAAADTwAAA48AAAPPAAAEDwAABE8AAASPAAAEzwAABQ8AAAVPAAAFjwAABc8AAAYPAAAGTwAABo8AAAbPAAAHDwAAB08AAAePAAAHzwAACA8AAAhPAAAIjwAACM8AAAkPAAAJTwAACY8AAAnPAAAKDwAACk8AAAqPAAAKzwAACw8AAAtPAAALjwAAC88AAAwPAAAMTwAADI8AAAzPAAANDwAADU8AAA2PAAANzwAADg8AAA5PAAAOjwAADs8AAA8PAAAPTwAAD48AAA/PAAAQDwAAEE8AABCPAAAQzwAAEQ8AABFPAAARjwAAEc8AABIPAAASTwAAEo8AABLPAAATDwAAE08AABOPAAATzwAAFA8AABRPAAAUjwAAFM8AABUPAAAVTwAAFY8AABXPAAAWDwAAFk8AABaPAAAWzwAAFw8AABdPAAAXjwAAF88AABgPAAAYTwAAGI8AABjPAAAZDwAAGU8AABmPAAAZzwAAGg8AABpPAAAajwAAGs8AABsPAAAbTwAAG48AABvPAAAcDwAAHE8AAByPAAAczwAAHQ8AAB1PAAAdjwAAHc8AAB4PAAAeTwAAHo8AAB7PAAAfDwAAH08AAB+PAAAfzwAAIA8AACBPAAAgjwAAIM8AACEPAAAhTwAAIY8AACHPAAAiDwAAIk8AACKPAAAizwAAIw8AACNPAAAjjwAAI88AACQPAAAkTwAAJI8AACTPAAAlDwAAJU8AACWPAAAlzwAAJg8AACZPAAAmjwAAJs8AACcPAAAnTwAAJ48AACfPAAAoDwAAKE8AACiPAAAozwAAKQ8AAClPAAApjwAAKc8AACoPAAAqTwAAKo8AACrPAAArDwAAK08AACuPAAArzwAALA8AACxPAAAsjwAALM8AAC0PAAAtTwAALY8AAC3PAAAuDwAALk8AAC6PAAAuzwAALw8AAC9PAAAvjwAAL88AADAPAAAwTwAAMI8AADDPAAAxDwAAMU8AADGPAAAxzwAAMg8AADJPAAAyjwAAMs8AADMPAAAzTwAAM48AADPPAAA0DwAANE8AADSPAAA0zwAANQ8AADVPAAA1jwAANc8AADYPAAA2TwAANo8AADbPAAA3DwAAN08AADePAAA3zwAAOA8AADhPAAA4jwAAOM8AADkPAAA5TwAAOY8AADnPAAA6DwAAOk8AADqPAAA6zwAAOw8AADtPAAA7jwAAO88AADwPAAA8TwAAPI8AADzPAAA9DwAAPU8AAD2PAAA9zwAAPg8AAD5PAAA+jwAAPs8AAD8PAAA/TwAAP48AAD/PAAAAD0AAAE9AAACPQAAAz0AAAQ9AAAFPQAABj0AAAc9AAAIPQAACT0AAAo9AAALPQAADD0AAA09AAAOPQAADz0AABA9AAARPQAAEj0AABM9AAAUPQAAFT0AABY9AAAXPQAAGD0AABk9AAAaPQAAGz0AABw9AAAdPQAAHj0AAB89AAAgPQAAIT0AACI9AAAjPQAAJD0AACU9AAAmPQAAJz0AACg9AAApPQAAKj0AACs9AAAsPQAALT0AAC49AAAvPQAAMD0AADE9AAAyPQAAMz0AADQ9AAA1PQAANj0AADc9AAA4PQAAOT0AADo9AAA7PQAAPD0AAD09AAA+PQAAPz0AAEA9AABBPQAAQj0AAEM9AABEPQAART0AAEY9AABHPQAASD0AAEk9AABKPQAASz0AAEw9AABNPQAATj0AAE89AABQPQAAUT0AAFI9AABTPQAAVD0AAFU9AABWPQAAVz0AAFg9AABZPQAAWj0AAFs9AABcPQAAXT0AAF49AABfPQAAYD0AAGE9AABiPQAAYz0AAGQ9AABlPQAAZj0AAGc9AABoPQAAaT0AAGo9AABrPQAAbD0AAG09AABuPQAAbz0AAHA9AABxPQAAcj0AAHM9AAB0PQAAdT0AAHY9AAB3PQAAeD0AAHk9AAB6PQAAez0AAHw9AAB9PQAAfj0AAH89AACAPQAAgT0AAII9AACDPQAAhD0AAIU9AACGPQAAhz0AAIg9AACJPQAAij0AAIs9AACMPQAAjT0AAI49AACPPQAAkD0AAJE9AACSPQAAkz0AAJQ9AACVPQAAlj0AAJc9AACYPQAAmT0AAJo9AACbPQAAnD0AAJ09AACePQAAnz0AAKA9AAChPQAA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mpmZmZmZ6T8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEAAAAAAAADwPwAAAAAAAAAAAAAAAAAAAABmZmZmZmYvQDMzMzMzMyFAAAAAAAAAAAAAAAAAAADgPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzMzMzM9M/AAAAAAAACEAAAAAAAAAAAAAAAAAAAABAMzMzMzMzF0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgPwAAAAAAAAAAAAAAAAAAAAAzMzMzMzPTPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZmZmZi5AAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzMzMzM9M/MzMzMzMz0z8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMzMz0z8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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AADwPwAAAAAAAAAAAAAAAAAA4D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYrQGZmZmZmZitAZmZmZmZmEEAzMzMzMzPTPwAAAAAAAAAAAAAAAAAA+D9mZmZmZmYjQAAAAAAAAOA/ZmZmZmZmFkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzMzMzM9M/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzMzMzM9M/AAAAAAAAAAAAAAAAAAAIQDMzMzMzM9M/AAAAAAAAAACamZmZmZkfQDMzMzMzMxNAzczMzMzMI0AAAAAAAAAAQM3MzMzMzAxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJqZmZmZmek/zczMzMzM/D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzMzMzMzPTPwAAAAAAAPA/zczMzMzM9D9mZmZmZmYWQM3MzMzMTDNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYCQDMzMzMzM9M/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ZmYOQAAAAAAAAPA/MzMzMzMzIEBmZmZmZmYeQGZmZmZmZhRAAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAAAADNzMzMzMz8PwAAAAAAAPA/ZmZmZmZmFEAAAAAAAAAAAAAAAAAAAPg/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAPA/AAAAAAAA4D8AAAAAAAAAAAAAAAAAAAAAzczMzMzMJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEBmZmZmZmYKQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGZmZmZmZhZAAAAAAAAAAAAAAAAAAAAIQGZmZmZmZgpAzczMzMzM9D8AAAAAAAAAADMzMzMzM9M/zczMzMzM/D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzMzMzMxFAZmZmZmZmEEAzMzMzMzPTPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYSQAAAAAAAAOA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzMzMzMzPTPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMzMz0z8AAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmZmZmZmYeQAAAAAAAAAAAAAAAAACAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOA/AAAAAABAQEBmZmZmZmYkQAAAAAAAAAAAMzMzMzMzF0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzMzMzMzPTPzMzMzMzMxVAMzMzMzMz0z8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA8D/NzMzMzMz8PwAAAAAAAAAAAAAAAAAAAABmZmZmZmYQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzczMzMzMI0AAAAAAAAAAADMzMzMzM9M/MzMzMzOzPEAAAAAAAAAAAGZmZmZmZhJAzczMzMzM9D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzMzMzMzPTP2ZmZmZmZg5AMzMzMzMz0z8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzczMzMzMIUCamZmZmZkbQAAAAAAAAAAAZmZmZmZmCkDNzMzMzMz8P83MzMzMTDNAAAAAAACAQEAzMzMz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JQUAACkFAAAtBQAAMQUAADUFAAA4BQAAPAUAAEAFAABEBQAASAUAAEwFAABQBQAAVAUAAFgFAABcBQAAYAUAAGQFAABoBQAAbAUAAHAFAAB0BQAAeAUAAHwFAACABQAAhAUAAIgFAACMBQAAkwUAAJoFAACdBQAAoAUAAKQFAACoBQAArAUAALAFAAC0BQAAuAUAALwFAADABQAAxwUAAMoFAADNBQAA0AUAANMFAADaBQAA4QUAAOgFAADvBQAA9gUAAP0FAAAEBgAACAYAAAwGAAAQBgAAFAYAABgGAAAcBgAAIAYAACQGAAAoBgAALAYAADMGAAA3BgAAOwYAAD8GAABDBgAARwYAAEoGAABOBgAAVQYAAFkGAABdBgAAYQYAAGUGAABsBgAAcAYAAHQGAAB4BgAAewYAAH8GAACDBgAAhwYAAIsGAACPBgAAkwYAAJcGAACbBgAAnwYAAKMGAACnBgAAqgYAAK0GAACxBgAAtQYAALkGAADABgAAwwYAAMcGAADLBgAAzwYAANMGAADXBgAA2wYAAN8GAADiBgAA5gYAAOoGAADuBgAA8gYAAPUGAAD4BgAA+wYAAP4GAAABBwAABQcAAAkHAAANBwAAFAcAABcHAAAaBwAAHQcAACAHAAAkBwAAKAcAACwHAAAwBwAANAcAADcHAAA7BwAAPwcAAEMHAABHBwAASwcAAE4HAABSBwAAWQcAAF0HAABhBwAAZAcAAGgHAABrBwAAbgcAAHEHAAB0BwAAdwcAAHoHAAB+BwAAggcAAIUHAACIBwAAiwcAAI4HAACRBwAAlAcAAJcHAACaBwAAnQcAAKAHAACjBwAApgcAAKoHAACuBwAAsQcAALUHAAC4BwAAvAcAAL8HAADCBwAAxQcAAMkHAADNBwAA0QcAANUHAADYBwAA3AcAAOAHAADkBwAA6AcAAOsHAADuBwAA8QcAAPUHAAD4BwAA+wcAAP4HAAABCAAABAgAAAcIAAAKCAAADQgAABAIAAAUCAAAFwgAABoIAAAdCAAAIAgAACMIAAAnCAAAKggAAC4IAAAyCAAANQgAADkIAAA9CAAAQQgAAEUIAABJCAAATAgAAE8IAABSCAAAVQgAAFgIAABbCAAAXggAAGEIAABkCAAAZwgAAGoIAABtCAAAcAgAAHMIAAB2CAAAeQgAAHwIAAB/CAAAgggAAIUIAACICAAAiwgAAI4IAACRCAAAlAgAAJcIAACaCAAAnQgAAKAIAACjCAAApggAAKkIAACsCAAArwgAALIIAAC2CAAAuQgAALwIAAC/CAAAwggAAMUIAADICAAAywgAAM8IAADSCAAA1QgAANgIAADcCAAA4AgAAOMIAADmCAAA6QgAAOwIAADvCAAA8ggAAPUIAAD4CAAA+wgAAP8IAAADCQAABwkAAAsJAAAPCQAAEgkAABUJAAAYCQAAGwkAAB8JAAAjCQAAJwkAACsJAAAuCQAAMQkAADQJAAA3CQAAOgkAAD0JAABACQAAQwkAAEcJAABLCQAATgkAAFEJAABUCQAAWAkAAFsJAABfCQAAYwkAAGYJAABqCQAAbQkAAHEJAAB1CQAAeQkAAH0JAACBCQAAhQkAAIkJAACMCQAAjwkAAJMJAACXCQAAmwkAAJ4JAACiCQAApgkAAKoJAACtCQAAsAkAALMJAAC2CQAAuQkAALwJAAC/CQAAwgkAAMUJAADICQAAywkAAM4JAADRCQAA1AkAANgJAADbCQAA3gkAAOIJAADmCQAA6gkAAO4JAADyCQAA+QkAAP0JAAABCgAABQoAAAgKAAAMCgAADwoAABIKAAAWCgAAGQoAAB0KAAAhCgAAJAoAACgKAAAsCgAAMAoAADMKAAA2CgAAOQoAADwKAAA/CgAAQgoAAEUKAABICgAASwoAAE8KAABTCgAAVwoAAFsKAABeCgAAYQoAAGQKAABnCgAAagoAAG0KAABwCgAAcwoAAHYKAAB6CgAAfgoAAIEKAACFCgAAiQoAAIwKAACQCgAAkwoAAJcKAACbCgAAnwoAAKMKAACmCgAAqQoAAKwKAACwCgAAswoAALYKAAC6CgAAvgoAAMEKAADFCgAAyQoAAMwKAADPCgAA0woAANcKAADbCgAA3woAAOMKAADnCgAA6woAAO4KAADxCgAA9AoAAPcKAAD6CgAA/QoAAAALAAADCwAABgsAAAoLAAANCwAAEAsAABMLAAAWCwAAGQsAAB0LAAAhCwAAJAsAACgLAAAsCwAALwsAADILAAA1CwAAOAsAADsLAAA+CwAAQgsAAEYLAABKCwAATgsAAFILAABWCwAAWgsAAF4LAABiCwAAZgsAAGoLAABuCwAAcgsAAHYLAAB6CwAAfgsAAIILAACGCwAAiQsAAIwLAACPCwAAkwsAAJcLAACbCwAAnwsAAKMLAACnCwAAqgsAAK4LAACyCwAAtgsAALkLAAC8CwAAwAsAAMQLAADICwAAzAsAANALAADTCwAA1wsAANoLAADdCwAA4AsAAOMLAADmCwAA6gsAAO4LAADyCwAA9gsAAPoLAAD9CwAAAAwAAAMMAAAGDAAACgwAAA0MAAARDAAAFAwAABcMAAAbDAAAHgwAACEMAAAkDAAAJwwAACoMAAAtDAAAMQwAADUMAAA5DAAAPAwAAEAMAABDDAAARwwAAEsMAABPDAAAUwwAAFYMAABaDAAAXgwAAGEMAABkDAAAZwwAAGoMAABtDAAAcQwAAHUMAAB5DAAAfAwAAH8MAACDDAAAhwwAAIsMAACODAAAkQwAAJQMAACXDAAAmgwAAJ0MAACgDAAAowwAAKYMAACpDAAArAwAAK8MAACzDAAAtgwAALoMAAC9DAAAwAwAAMMMAADGDAAAyQwAAMwMAADPDAAA0gwAANUMAADYDAAA2wwAAN4MAADhDAAA5AwAAOcMAADqDAAA7QwAAPEMAAD1DAAA+AwAAPwMAAAADQAABA0AAAcNAAALDQAADw0AABINAAAVDQAAGA0AABsNAAAeDQAAIQ0AACUNAAApDQAALA0AAC8NAAAyDQAANQ0AADgNAAA7DQAAPg0AAEENAABEDQAARw0AAEoNAABNDQAAUA0AAFMNAABWDQAAWQ0AAFwNAABfDQAAYg0AAGUNAABoDQAAaw0AAG4NAAByDQAAdg0AAHkNAAB8DQAAfw0AAIINAACFDQAAiA0AAIsNAACODQAAkQ0AAJUNAACYDQAAmw0AAJ4NAAChDQAApA0AAKcNAACqDQAArQ0AALENAAC1DQAAuQ0AALwNAADADQAAww0AAMYNAADJDQAAzA0AAM8NAADSDQAA1Q0AANgNAADbDQAA3g0AAOENAADkDQAA5w0AAOoNAADuDQAA8g0AAPUNAAD5DQAA/A0AAP8NAAACDgAABQ4AAAgOAAALDgAADg4AABEOAAAUDgAAFw4AABoOAAAdDgAAIA4AACMOAAAnDgAAKw4AAC4OAAAxDgAANA4AADgOAAA8DgAAQA4AAEQOAABIDgAASw4AAE4OAABSDgAAVQ4AAFgOAABbDgAAXg4AAGEOAABkDgAAZw4AAGoOAABtDgAA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emxlcmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5zdW5zdW5zdW5zbm93c25vd3Nub3dzbm93c25vd3Nub3dzbm93cmFpbnJhaW5yYWlucmFpbnJhaW5yYWluZHJpenpsZXJhaW5yYWlucmFpbnJhaW5yYWluc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5kcml6emxlcmFpbnJhaW5yYWluc3VucmFpbnJhaW5yYWluc3VucmFpbnJhaW5zbm93c3Vuc25vd3Nub3dzdW5yYWluc3VucmFpbnJhaW5zbm93c3Vuc3VucmFpbnJhaW5yYWluc25vd3Nub3dyYWluc25vd3JhaW5zbm93cmFpbnJhaW5yYWlucmFpbnJhaW5zdW5zdW5yYWluZHJpenpsZXJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnN1bnJhaW5zdW5zbm93cmFpbnN1bnN1bnN1bnJhaW5yYWlucmFpbmRyaXp6bGVzdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWluc3VucmFpbnJhaW5yYWlucmFpbmRyaXp6bGVyYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5zdW5zdW5zdW5yYWluc3Vuc3Vuc3Vuc3Vuc3VuZHJpenpsZXN1bnJhaW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3Vuc3VucmFpbnN1bnJhaW5yYWlucmFpbnJhaW5zdW5yYWlucmFpbnN1bnJhaW5yYWlucmFpbnN1bnJhaW5yYWluc3Vuc3Vuc3VucmFpbnN1bnJhaW5yYWluc3Vuc3VucmFpbnJhaW5kcml6emxlcmFpbnJhaW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5kcml6emxlc3Vuc3VucmFpbnJhaW5kcml6emxlZm9nZHJpenpsZXJhaW5yYWlucmFpbnJhaW5zdW5zdW5zdW5yYWluc3VucmFpbnJhaW5zdW5zdW5kcml6emxlZHJpenpsZWRyaXp6bGVzdW5zdW5zdW5kcml6emxlc3Vuc3Vuc3Vuc3VucmFpbmRyaXp6bGVzdW5kcml6emxlc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VuZHJpenpsZWRyaXp6bGVzdW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5kcml6emxlZHJpenpsZWRyaXp6bGVyYWluZm9nZm9nc3VuZHJpenpsZWRyaXp6bGVyYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VuZHJpenpsZWRyaXp6bGVkcml6emxlcmFpbnJhaW5yYWlucmFpbnN1bnN1bnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWlucmFpbnJhaW5yYWluZHJpenpsZXJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbmRyaXp6bGVmb2dzdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc25vd3Nub3dyYWluc25vd3Nub3dyYWlucmFpbnJhaW5yYWlucmFpbnNub3dyYWlucmFpbnJhaW5yYWluZHJpenpsZWRyaXp6bGVzdW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc25vd2RyaXp6bGVzdW5zdW5zdW5zdW5kcml6emxlZHJpenpsZWRyaXp6bGVkcml6emxlZHJpenpsZWRyaXp6bGVkcml6emxlcmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbmRyaXp6bGVyYWlucmFpbnJhaW5yYWlucmFpbnN1bnJhaW5kcml6emxlcmFpbnJhaW5yYWlucmFpbmRyaXp6bGVyYWlucmFpbnJhaW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnN1bnN1bnJhaW5yYWlucmFpbmRyaXp6bGVmb2dyYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5yYWluc25vd3N1bnN1bnN1bnN1bnN1bnJhaW5yYWlucmFpbmRyaXp6bGVzdW5zdW5zdW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbnN1bnJhaW5yYWlucmFpbnJhaW5yYWluZm9ncmFpbmRyaXp6bGVyYWlucmFpbnN1bnJhaW5zdW5zdW5zdW5zdW5mb2dzdW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5yYWluc3VucmFpbmZvZ3JhaW5zdW5zdW5zdW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnN1bnN1bnN1bnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5yYWluc3Vuc3Vuc3Vuc3Vuc3VucmFpbnN1bnJhaW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5zdW5zdW5zdW5zdW5mb2dzdW5zdW5zdW5zdW5yYWluZm9nc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnN1bnN1bnN1bnJhaW5yYWluZm9nc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5zdW5zdW5zdW5yYWlucmFpbnJhaW5yYWluc3VuZm9nc3Vuc3Vuc3Vuc3Vuc3VuZm9ncmFpbnJhaW5zdW5zdW5zdW5yYWluc3VucmFpbnJhaW5zdW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnN1bnN1bnJhaW5yYWlucmFpbnN1bnJhaW5yYWlucmFpbmZvZ3N1bnN1bmZvZ2ZvZ3N1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5zdW5zdW5yYWlucmFpbnJhaW5yYWlucmFpbmRyaXp6bGVyYWlucmFpbnJhaW5zdW5yYWluc3VuZm9ncmFpbnN1bnJhaW5yYWluc3VucmFpbnJhaW5yYWluc3Vuc3Vuc3Vuc3VuZm9nc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5yYWluc3VucmFpbnJhaW5zdW5yYWluc3Vuc25vd3JhaW5yYWlucmFpbnN1bnN1bnN1bnJhaW5zdW5zdW5yYWlucmFpbnN1bnJhaW5yYWluZm9nc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5mb2dzdW5zdW5zdW5zdW5yYWlucmFpbnN1bnJhaW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc25vd3JhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5yYWluZm9nZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWluc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5zdW5zdW5zdW5yYWluc3VucmFpbnN1bnN1bnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5yYWlucmFpbnJhaW5zdW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnN1bnJhaW5yYWluc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWluc3Vuc3VucmFpbnJhaW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnN1bnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5yYWlucmFpbnN1bnJhaW5yYWlucmFpbnN1bnJhaW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5mb2dzdW5zdW5mb2dzdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5zdW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5zdW5zdW5zdW5mb2dmb2dzdW5zdW5zdW5yYWlucmFpbnJhaW5zdW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5zdW5yYWluc3VuZm9nZm9nc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5zdW5mb2dzdW5yYWlucmFpbnJhaW5yYWlucmFpbmZvZ2ZvZ3JhaW5zdW5zdW5zdW5zdW5zdW5mb2dmb2dmb2dmb2dmb2dyYWlucmFpbnN1bnJhaW5yYWlucmFpbnN1bnJhaW5yYWluc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5zdW5mb2dyYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc25vd3N1bnN1bmZvZ3N1bnJhaW5yYWlucmFpbnN1bnJhaW5yYWlucmFpbnJhaW5zdW5mb2dmb2dzdW5zdW5yYWlucmFpbnJhaW5yYWluc3Vuc3VucmFpbnJhaW5mb2dmb2dyYWlucmFpbmZvZ3N1bnN1bnN1bnJhaW5mb2dyYWlucmFpbmZvZ2ZvZ2ZvZ3JhaW5yYWlucmFpbmZvZ2ZvZ2ZvZ3JhaW5mb2dyYWlucmFpbnJhaW5mb2dmb2dyYWlucmFpbnJhaW5mb2dmb2dyYWluZm9nc3VuZm9nZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbmZvZ3JhaW5mb2dyYWluc3VuZm9nc3Vuc3VucmFpbnJhaW5zdW5zdW5zdW5zdW5yYWlucmFpbnJhaW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dmb2dmb2dyYWlucmFpbnN1bnJhaW5yYWlucmFpbnJhaW5yYWluc3Vuc3VucmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnN1bnN1bnJhaW5yYWlucmFpbnN1bnJhaW5zdW5zdW5yYWlucmFpbnN1bnN1bnJhaW5zdW5zdW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5zdW5yYWlucmFpbnJhaW5mb2dyYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnJhaW5mb2dzdW5zdW5zdW5zdW5mb2dyYWlucmFpbnJhaW5mb2dzdW5zdW5zdW5zdW5mb2dzdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5zdW5yYWlucmFpbnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bnN1bmRyaXp6bGVzdW5zdW5zdW5yYWluc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbnN1bmZvZ3N1bnN1bnN1bnN1bnN1bmRyaXp6bGVzdW5kcml6emxlc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3Vuc3VucmFpbmZvZ3JhaW5mb2dzdW5zdW5zdW5zdW5zdW5zdW5zdW5mb2dzdW5zdW5zdW5mb2dzdW5zdW5zdW5yYWluc3VucmFpbnN1bnN1bnN1bnN1bmRyaXp6bGVyYWluc3VuZHJpenpsZWRyaXp6bGVzdW5zdW5zdW5zdW5yYWlucmFpbnJhaW5zdW5yYWluc3Vuc3Vuc3VucmFpbnJhaW5yYWluc3Vuc3VuZm9nc3Vuc3VucmFpbnN1bnN1bnJhaW5yYWluc3Vuc3VucmFpbmZvZ3N1bnN1bmZvZ3JhaW5zdW5zdW5zdW5zdW5mb2dmb2dmb2dzdW5zdW5zdW5kcml6emxlcmFpbmZvZ3JhaW5yYWluc3VucmFpbnJhaW5mb2dmb2dzdW5yYWlucmFpbnJhaW5mb2dmb2dmb2dmb2dmb2dyYWlucmFpbmZvZ3JhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWluZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbmZvZ3N1bmZvZ3JhaW5yYWluc3Vuc3Vuc3Vuc3VuZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5yYWlucmFpbnJhaW5zdW5yYWlucmFpbnJhaW5yYWluZm9ncmFpbnJhaW5yYWlucmFpbnJhaW5yYWluc3VucmFpbnJhaW5mb2dzdW5zdW4AAP////8AAAAA"},"tooltip":null}},"6e6a6e1dcd8249199e8067c27eb88579":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz._core.component.Component","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_272fec5014524f7b8ad45206772808ef","spec":"","tabbable":null,"tables":{},"tooltip":null}},"731b067c84ea425f94bd11c8562740e5":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.mark._mark.Mark","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_4865eebb74234ee5aa579f2c747ed88b","spec":"","tabbable":null,"tables":{},"tooltip":null}},"74557e9ec7914b5a9364f1a7c7634e3e":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz._core.component.Component","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_2ca51a08caa14532a54d963d8534706a","spec":"{\"hconcat\":[{\"plot\":[{\"mark\":\"barX\",\"data\":{\"from\":\"EszRsscXZ8t3UdWDjPmKzx\",\"filterBy\":\"$selection_EszRsscXZ8t3UdWDjPmKzx\"},\"x\":{\"count\":null},\"y\":{\"column\":\"weather\"},\"fill\":\"#ccc\",\"fillOpacity\":0.2},{\"mark\":\"barX\",\"data\":{\"from\":\"EszRsscXZ8t3UdWDjPmKzx\",\"filterBy\":\"$selection_4FXeTkid83ExNbu5gTvJfw\"},\"x\":{\"count\":null},\"y\":{\"column\":\"weather\"},\"fill\":\"weather\"},{\"select\":\"toggleY\",\"as\":\"$selection_5UUyc5gc2hSGoUHGWa9JuN\"},{\"select\":\"highlight\",\"by\":\"$selection_5UUyc5gc2hSGoUHGWa9JuN\"}],\"yLabel\":null,\"width\":672,\"height\":200,\"xDomain\":\"Fixed\",\"yDomain\":[\"sun\",\"fog\",\"drizzle\",\"rain\",\"snow\"]}],\"plotDefaults\":{\"colorDomain\":[\"sun\",\"fog\",\"drizzle\",\"rain\",\"snow\"],\"colorRange\":[\"#e7ba52\",\"#a7a7a7\",\"#aec7e8\",\"#1f77b4\",\"#9467bd\"]},\"params\":{\"selection_EszRsscXZ8t3UdWDjPmKzx\":{\"select\":\"intersect\"},\"selection_4FXeTkid83ExNbu5gTvJfw\":{\"select\":\"intersect\"},\"selection_5UUyc5gc2hSGoUHGWa9JuN\":{\"select\":\"single\"}}}","tabbable":null,"tables":{"EszRsscXZ8t3UdWDjPmKzx":""},"tooltip":null}},"81cd1efae2014711a859b33f36e98ba0":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"85ff1da20fa647c5ae09090f387f6996":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.interactor._interactors.Interactor","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_694769fec9704c63a788f80027132cef","spec":"","tabbable":null,"tables":{},"tooltip":null}},"9d284657bc8040159f18fd5bb18dfb50":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.interactor._interactors.Interactor","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_f6d3809925554f80842e79320dc6fe91","spec":"","tabbable":null,"tables":{},"tooltip":null}},"9e4de328fb334ffd9cd3cea1faf852e2":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.interactor._interactors.Interactor","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_ac49478d8f114a36a05f84e67fbb5436","spec":"","tabbable":null,"tables":{},"tooltip":null}},"a1a323b055474eb4b0b07b69b1a7b20f":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"ac49478d8f114a36a05f84e67fbb5436":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"b679c5d8cca24a5c9478f8b50fa79b11":{"model_module":"anywidget","model_module_version":"~0.9.*","model_name":"AnyModel","state":{"_anywidget_id":"inspect_viz.plot._legend.Legend","_css":"","_dom_classes":[],"_esm":"// js/widgets/mosaic.ts\nimport {\n  parseSpec\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\nimport { throttle as throttle2 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\n\n// js/context/index.ts\nimport { wasmConnector } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { InstantiateContext } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-spec@0.16.2/+esm\";\n\n// js/inputs/choice.ts\nimport {\n  isParam,\n  isSelection,\n  clausePoint,\n  clausePoints,\n  toDataColumns\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  Query\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\n\n// js/util/object.ts\nvar isObject = (v) => {\n  return v !== null && typeof v === \"object\" && !Array.isArray(v);\n};\n\n// js/inputs/input.ts\nimport {\n  coordinator,\n  MosaicClient\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nfunction input(InputClass, ...params) {\n  const input2 = new InputClass(...params);\n  coordinator().connect(input2);\n  return input2.element;\n}\nvar Input = class extends MosaicClient {\n  element;\n  constructor(filterBy) {\n    super(filterBy);\n    this.element = document.createElement(\"div\");\n    Object.defineProperty(this.element, \"value\", { value: this });\n  }\n  activate() {\n  }\n};\n\n// js/util/id.ts\nfunction generateId() {\n  return \"id-\" + Math.random().toString(36).substring(2) + Date.now().toString(36);\n}\n\n// js/inputs/util.ts\nfunction createFieldset(legend) {\n  const fieldset = window.document.createElement(\"fieldset\");\n  if (legend) {\n    const legendEl = window.document.createElement(\"legend\");\n    legendEl.innerText = legend;\n    fieldset.append(legend);\n  }\n  return fieldset;\n}\nfunction setFieldsetOptions(fieldset, options, type) {\n  fieldset.querySelectorAll(\"input, label\").forEach((el) => {\n    el.remove();\n  });\n  const name = generateId();\n  for (const { value, label } of options || []) {\n    const { inputLabel } = createLabeledInput(type, label, name, value);\n    fieldset.appendChild(inputLabel);\n  }\n}\nfunction createLabeledInput(type, label, name, value) {\n  const inputLabel = window.document.createElement(\"label\");\n  const input2 = window.document.createElement(\"input\");\n  input2.type = type;\n  if (name) {\n    input2.name = name;\n  }\n  if (value) {\n    input2.value = value;\n  }\n  inputLabel.appendChild(input2);\n  inputLabel.appendChild(window.document.createTextNode(` ${label || value}`));\n  return { inputLabel, input: input2 };\n}\nfunction setupActivationListeners(input2, element) {\n  element.addEventListener(\"pointerenter\", (evt) => {\n    if (!evt.buttons) input2.activate();\n  });\n  element.addEventListener(\"focus\", () => input2.activate());\n}\n\n// js/inputs/choice.ts\nvar ChoiceInput = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n  }\n  data_ = [];\n  activate() {\n    if (isSelection(this.options_.as) && this.options_.column) {\n      const field = this.options_.field || this.options_.column;\n      this.options_.as.activate(clausePoint(field, void 0, { source: this }));\n    }\n  }\n  publish(value) {\n    const { as, field, column: column2 } = this.options_;\n    if (isSelection(as) && column2) {\n      let clause = clausePoint(field || column2, void 0, { source: this });\n      if (Array.isArray(value) && value.length > 0) {\n        clause = clausePoints(\n          [field || column2],\n          value.map((v) => [v]),\n          { source: this }\n        );\n      } else if (value?.length) {\n        clause = clausePoint(field || column2, value, { source: this });\n      }\n      as.update(clause);\n    } else if (isParam(as)) {\n      as.update(value);\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from) {\n      return null;\n    }\n    if (!column2) {\n      throw new Error(\"You must specify a column along with a data source\");\n    }\n    return Query.from(from).select({ value: column2 }).distinct().where(...filter).orderby(column2);\n  }\n  queryResult(data) {\n    this.setData([{ value: \"\", label: \"All\" }, ...this.queryResultOptions(data)]);\n    return this;\n  }\n  queryResultOptions(data) {\n    const columns = toDataColumns(data);\n    const values = columns.columns.value;\n    return values.map((v) => ({ value: v }));\n  }\n  setOptions(options) {\n    this.setData(options.map((opt) => isObject(opt) ? opt : { value: opt }));\n    this.update();\n  }\n  setupParamListener() {\n    if (!isSelection(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        this.selectedValue = value;\n      });\n    }\n  }\n  setupActivationListeners(element) {\n    if (isSelection(this.options_.as)) {\n      setupActivationListeners(this, element);\n    }\n  }\n  updateSelectedValue() {\n    const value = isSelection(this.options_.as) ? this.options_.as.valueFor(this) : this.options_.as.value;\n    this.selectedValue = value === void 0 ? \"\" : value;\n  }\n  setData(options) {\n    if (isParam(this.options_.as)) {\n      const paramValue = this.options_.as.value;\n      if (paramValue && !options.some((option) => option.value === paramValue)) {\n        options = [...options, { value: paramValue }];\n      }\n    }\n    this.data_ = options;\n  }\n};\n\n// js/inputs/radio_group.ts\nvar RadioGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.selectedValue = \"\";\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"radio\") {\n          this.publish(this.selectedValue ?? null);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelector(\n      'input[type=\"radio\"]:checked'\n    );\n    return checked?.value ? checked.value === \"on\" ? \"\" : checked.value : \"\";\n  }\n  set selectedValue(value) {\n    value = value === \"\" ? \"on\" : value;\n    const radios = this.fieldset_.querySelectorAll('input[type=\"radio\"]');\n    for (const radio of radios) {\n      if (radio.value === value) {\n        radio.checked = true;\n        radio.dispatchEvent(new Event(\"change\", { bubbles: true }));\n        break;\n      }\n    }\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"radio\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/types.ts\nvar kSidebarFullwidth = \"sidebar-fullwidth\";\nvar kInputSearch = \"input-search\";\n\n// js/inputs/select.ts\nimport TomSelect from \"https://cdn.jsdelivr.net/npm/tom-select@2.4.3/+esm\";\nvar Select = class extends ChoiceInput {\n  select_;\n  multiple_;\n  tomSelect_ = void 0;\n  constructor(options) {\n    super(options);\n    this.multiple_ = options.multiple || false;\n    this.element.classList.add(kSidebarFullwidth);\n    const label = options.label || options.column;\n    let labelEl = null;\n    if (label !== void 0) {\n      labelEl = window.document.createElement(\"label\");\n      labelEl.innerText = label;\n      this.element.appendChild(labelEl);\n    }\n    this.select_ = document.createElement(\"select\");\n    if (options.width) {\n      this.select_.style.width = `${options.width}px`;\n    }\n    this.select_.id = generateId();\n    if (labelEl) {\n      labelEl.appendChild(this.select_);\n    } else {\n      this.element.appendChild(this.select_);\n    }\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.select_.addEventListener(\"input\", () => {\n      this.publish(this.selectedValue ?? null);\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.select_);\n  }\n  queryResult(data) {\n    if (this.multiple_) {\n      this.setData(this.queryResultOptions(data));\n      return this;\n    } else {\n      return super.queryResult(data);\n    }\n  }\n  get selectedValue() {\n    return this.tomSelect_?.getValue() ?? \"\";\n  }\n  set selectedValue(value) {\n    this.tomSelect_?.setValue(value);\n  }\n  update() {\n    if (!this.tomSelect_) {\n      if (this.multiple_) {\n        this.select_.multiple = true;\n      }\n      const config = {\n        create: false,\n        dropdownParent: \"body\"\n      };\n      if (!this.select_.multiple) {\n        config.allowEmptyOption = !this.select_.multiple;\n        config.controlInput = null;\n      } else {\n        config.plugins = {\n          remove_button: {\n            title: \"Remove this item\"\n          }\n        };\n      }\n      this.tomSelect_ = new TomSelect(this.select_, config);\n      if (this.multiple_) {\n        this.tomSelect_.on(\"item_add\", () => {\n          this.tomSelect_.control_input.value = \"\";\n          this.tomSelect_?.refreshOptions();\n        });\n      }\n    }\n    this.tomSelect_.clearOptions();\n    this.tomSelect_.addOption(\n      this.data_.map((o) => ({ value: o.value, text: o.label || o.value }))\n    );\n    this.tomSelect_.refreshOptions(false);\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox_group.ts\nvar CheckboxGroup = class extends ChoiceInput {\n  fieldset_;\n  constructor(options) {\n    super(options);\n    this.fieldset_ = createFieldset(options.label || options.column);\n    this.element.append(this.fieldset_);\n    if (options.options) {\n      this.setOptions(options.options);\n    }\n    this.fieldset_.addEventListener(\"change\", (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        if (e.target.type === \"checkbox\") {\n          this.publish(this.selectedValue ?? []);\n        }\n      }\n    });\n    this.setupParamListener();\n    this.setupActivationListeners(this.fieldset_);\n  }\n  get selectedValue() {\n    const checked = this.fieldset_.querySelectorAll(\n      'input[type=\"checkbox\"]:checked'\n    );\n    return Array.from(checked).map((checkbox) => checkbox.value);\n  }\n  set selectedValue(values) {\n    const checkboxes = this.fieldset_.querySelectorAll('input[type=\"checkbox\"]');\n    for (const checkbox of checkboxes) {\n      const input2 = checkbox;\n      const shouldBeChecked = values.includes(input2.value);\n      if (input2.checked !== shouldBeChecked) {\n        input2.checked = shouldBeChecked;\n        input2.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  }\n  queryResult(data) {\n    this.setData(this.queryResultOptions(data));\n    return this;\n  }\n  update() {\n    setFieldsetOptions(this.fieldset_, this.data_, \"checkbox\");\n    this.updateSelectedValue();\n    return this;\n  }\n};\n\n// js/inputs/checkbox.ts\nimport {\n  clausePoint as clausePoint2,\n  isParam as isParam2,\n  isSelection as isSelection2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nvar Checkbox = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    const { inputLabel, input: input2 } = createLabeledInput(\"checkbox\", options_.label);\n    input2.id = generateId();\n    this.element.appendChild(inputLabel);\n    input2.checked = options_.checked;\n    const publish = () => this.publish(\n      input2.checked ? options_.values[0] || void 0 : options_.values[1] || void 0\n    );\n    input2.addEventListener(\"change\", publish);\n    publish();\n    if (!isSelection2(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        input2.checked = value === this.options_.values[0];\n      });\n    } else {\n      setupActivationListeners(this, input2);\n    }\n  }\n  activate() {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.activate(this.clause());\n    }\n  }\n  clause(value) {\n    if (!this.options_.field) {\n      throw new Error(\"checkbox 'field' option must be specified with selection\");\n    }\n    return clausePoint2(this.options_.field, value, { source: this });\n  }\n  publish(value) {\n    if (isSelection2(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam2(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n};\n\n// js/inputs/slider.ts\nimport {\n  clauseInterval,\n  clausePoint as clausePoint3,\n  isParam as isParam3,\n  isSelection as isSelection3\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  max,\n  min,\n  Query as Query2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  create as createSlider\n} from \"https://cdn.jsdelivr.net/npm/nouislider@15.8.1/+esm\";\nvar kSliderInput = \"slider-input\";\nvar Slider = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSliderInput, kSidebarFullwidth);\n    const id = generateId();\n    const label = options_.label || options_.column;\n    let container = this.element;\n    if (label) {\n      container = window.document.createElement(\"label\");\n      container.innerText = label;\n      this.element.appendChild(container);\n    }\n    let { value, width, min: min2, max: max2 } = options_;\n    this.slider_ = document.createElement(\"div\");\n    this.slider_.classList.add(\"noUi-round\");\n    this.slider_.setAttribute(\"id\", id);\n    if (width != void 0) {\n      this.slider_.style.width = `${+width}px`;\n    }\n    if (container) {\n      container.appendChild(this.slider_);\n    } else {\n      this.element.appendChild(this.slider_);\n    }\n    this.sliderApi_ = createSlider(this.slider_, {\n      range: { min: 0, max: 0 },\n      connect: options_.select === \"interval\",\n      start: options_.select === \"interval\" ? [0, 0] : 0\n    });\n    this.curval_ = document.createElement(\"label\");\n    this.curval_.setAttribute(\"class\", \"slider-value\");\n    this.element.appendChild(this.curval_);\n    if (this.options_.as?.value === void 0) {\n      this.publish(value);\n    }\n    this.updateCurrentValue();\n    this.curval_.innerText = this.sliderValue.toString();\n    this.sliderApi_.on(\"update\", () => {\n      this.updateCurrentValue();\n      this.publish(this.sliderValue);\n    });\n    if (!isSelection3(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value2) => {\n        if (!areEqual(value2, this.sliderValue)) {\n          this.sliderApi_.set(value2);\n          this.updateCurrentValue();\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.slider_);\n    }\n    if (!options_.from) {\n      min2 = min2 ?? (Array.isArray(value) ? value[0] : value ?? 0);\n      max2 = max2 ?? (Array.isArray(value) ? value[1] : value ?? 0);\n      const start = value ?? (options_.select === \"interval\" ? [0, 0] : 0);\n      this.updateSlider(min2, max2, start);\n    }\n  }\n  slider_;\n  sliderApi_;\n  curval_;\n  firstQuery_ = false;\n  updateCurrentValue() {\n    const value = this.sliderValue;\n    if (Array.isArray(value)) {\n      this.curval_.innerText = `${value[0].toLocaleString()}-${value[1].toLocaleString()}`;\n    } else {\n      this.curval_.innerHTML = value.toLocaleString();\n    }\n  }\n  get sliderValue() {\n    const value = this.sliderApi_.get();\n    if (Array.isArray(value)) {\n      return value.map(cleanNumber).slice(0, 2);\n    } else {\n      return cleanNumber(value);\n    }\n  }\n  set sliderValue(value) {\n    this.sliderApi_.set(value, true);\n  }\n  activate() {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.activate(this.clause());\n    }\n  }\n  query(filter = []) {\n    const { from, column: column2 } = this.options_;\n    if (!from || !column2) {\n      return null;\n    }\n    return Query2.select({ min: min(column2), max: max(column2) }).from(from).where(...filter);\n  }\n  queryResult(data) {\n    const { min: dataMin, max: dataMax } = Array.from(data)[0];\n    const min2 = this.options_.min ?? dataMin;\n    const max2 = this.options_.max ?? dataMax;\n    let start = this.sliderValue;\n    if (!this.firstQuery_) {\n      this.firstQuery_ = true;\n      if (this.options_.value === void 0) {\n        start = this.options_.select === \"interval\" ? [min2, max2] : max2;\n      } else {\n        start = this.options_.value;\n      }\n    }\n    this.updateSlider(min2, max2, start);\n    return this;\n  }\n  updateSlider(min2, max2, start) {\n    const step = this.options_.step ?? (min2 >= 5 || max2 >= 5 ? 1 : void 0);\n    this.sliderApi_.updateOptions(\n      {\n        range: {\n          min: min2,\n          max: max2\n        },\n        step,\n        start\n      },\n      true\n    );\n    return this;\n  }\n  clause(value) {\n    let { field, column: column2, min: min2, select = \"point\" } = this.options_;\n    field = field || column2;\n    if (!field) {\n      throw new Error(\n        \"You must specify a 'column' or 'field' for a slider targeting a selection.\"\n      );\n    }\n    if (select === \"interval\" && value !== void 0) {\n      const domain = Array.isArray(value) ? value : [min2 ?? 0, value];\n      return clauseInterval(field, domain, {\n        source: this,\n        bin: \"ceil\",\n        scale: { type: \"identity\", domain },\n        pixelSize: this.options_.step || void 0\n      });\n    } else {\n      return clausePoint3(field, Array.isArray(value) ? value[0] : value, {\n        source: this\n      });\n    }\n  }\n  publish(value) {\n    const target = this.options_.as;\n    if (isSelection3(target)) {\n      target.update(this.clause(value));\n    } else if (isParam3(target)) {\n      target.update(value);\n    }\n  }\n};\nfunction areEqual(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.map(cleanNumber) === b.map(cleanNumber);\n  } else if (!Array.isArray(a) && !Array.isArray(b)) {\n    return cleanNumber(a) === cleanNumber(b);\n  } else {\n    return false;\n  }\n}\nfunction cleanNumber(num) {\n  if (typeof num === \"string\") {\n    num = parseFloat(num);\n  }\n  if (!isFinite(num)) return num;\n  if (num === 0) return 0;\n  const magnitude = Math.abs(num);\n  const epsilon = magnitude * Number.EPSILON * 100;\n  const rounded = Math.round(num);\n  if (Math.abs(num - rounded) < epsilon) {\n    return rounded;\n  }\n  return parseFloat(num.toPrecision(15));\n}\n\n// js/inputs/table.ts\nimport {\n  clausePoints as clausePoints2,\n  isSelection as isSelection4,\n  queryFieldInfo,\n  throttle,\n  toDataColumns as toDataColumns2\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport {\n  and,\n  asc,\n  contains,\n  desc,\n  eq,\n  gt,\n  gte,\n  isNull,\n  literal,\n  lt,\n  lte,\n  neq,\n  not,\n  or,\n  prefix,\n  suffix,\n  Query as Query3,\n  sql,\n  column\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nimport {\n  createGrid,\n  ModuleRegistry,\n  AllCommunityModule,\n  themeBalham\n} from \"https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/+esm\";\nimport * as d3Format from \"https://cdn.jsdelivr.net/npm/d3-format@3.1.0/+esm\";\nimport * as d3TimeFormat from \"https://cdn.jsdelivr.net/npm/d3-time-format@4.1.0/+esm\";\nvar Table = class extends Input {\n  constructor(options_) {\n    super(options_.filter_by);\n    this.options_ = options_;\n    ModuleRegistry.registerModules([AllCommunityModule]);\n    this.id_ = generateId();\n    this.columns_ = resolveColumns(this.options_.columns || [\"*\"]);\n    this.columnOptions_ = this.columns_.reduce(\n      (acc, col) => {\n        acc[col.column] = col;\n        return acc;\n      },\n      {}\n    );\n    this.height_ = this.options_.height;\n    this.currentRow_ = -1;\n    this.schema_ = [];\n    this.element.classList.add(\"inspect-viz-table\");\n    if (typeof this.options_.width === \"number\") {\n      this.element.style.width = `${this.options_.width}px`;\n    } else {\n      this.element.style.width = \"100%\";\n    }\n    if (this.options_.max_width) {\n      this.element.style.maxWidth = `${this.options_.max_width}px`;\n    }\n    if (this.options_.height) {\n      this.element.style.height = `${this.height_}px`;\n    }\n    this.gridContainer_ = document.createElement(\"div\");\n    this.gridContainer_.id = this.id_;\n    this.gridContainer_.style.width = \"100%\";\n    this.gridContainer_.style.height = \"100%\";\n    this.element.appendChild(this.gridContainer_);\n    this.gridOptions_ = this.createGridOptions(this.options_);\n  }\n  id_;\n  columns_;\n  columnOptions_;\n  height_;\n  gridContainer_;\n  grid_ = null;\n  gridOptions_;\n  schema_;\n  currentRow_;\n  sortModel_ = [];\n  filterModel_ = {};\n  data_ = {\n    numRows: 0,\n    columns: {}\n  };\n  // contribute a selection clause back to the target selection\n  clause(rows = []) {\n    const fields = this.schema_.map((s) => s.column);\n    const values = rows.map((row) => {\n      return fields.map((f) => this.data_.columns[f][row]);\n    });\n    return clausePoints2(fields, values, { source: this });\n  }\n  // mosaic calls this and initialization to let us fetch the schema\n  // and do related setup\n  async prepare() {\n    const table = this.options_.from;\n    const fields = this.columns_.map((column2) => ({ column: column2.column, table }));\n    this.schema_ = await queryFieldInfo(this.coordinator, fields);\n    const columnDefs = this.schema_.map(\n      ({ column: column2, type }) => this.createColumnDef(column2, type)\n    );\n    this.gridOptions_.columnDefs = columnDefs;\n    const myTheme = themeBalham.withParams({\n      spacing: 4,\n      accentColor: \"blue\"\n    });\n    this.gridOptions_.theme = myTheme;\n    this.grid_ = createGrid(this.gridContainer_, this.gridOptions_);\n  }\n  // mosaic calls this every time it needs to show data to find\n  // out what query we want to run\n  query(filter = []) {\n    let query = Query3.from(this.options_.from).select(\n      this.schema_.length ? this.schema_.map((s) => s.column) : \"*\"\n    );\n    query = query.where(...filter);\n    Object.keys(this.filterModel_).forEach((colId) => {\n      const filter2 = this.filterModel_[colId];\n      const expression = filterExpression(colId, filter2, query);\n      if (expression) {\n        query = query.where(expression);\n      }\n    });\n    if (this.sortModel_.length > 0) {\n      this.sortModel_.forEach((sort) => {\n        query = query.orderby(sort.sort === \"asc\" ? asc(sort.colId) : desc(sort.colId));\n      });\n    }\n    return query;\n  }\n  // mosaic returns the results of the query() in this function.\n  queryResult(data) {\n    this.data_ = toDataColumns2(data);\n    return this;\n  }\n  // requests a client UI update (e.g. to reflect results from a query)\n  update() {\n    this.updateGrid(null);\n    return this;\n  }\n  updateGrid = throttle(async () => {\n    if (!this.grid_) return;\n    const rowData = [];\n    for (let i = 0; i < this.data_.numRows; i++) {\n      const row = {};\n      this.schema_.forEach(({ column: column2 }) => {\n        row[column2] = this.data_.columns[column2][i];\n      });\n      rowData.push(row);\n    }\n    this.grid_.setGridOption(\"rowData\", rowData);\n  });\n  createGridOptions(options) {\n    const headerHeightPixels = typeof options.header_height === \"string\" ? void 0 : options.header_height;\n    const hoverSelect = options.select === \"hover\";\n    const explicitSelection = resolveRowSelection(options);\n    return {\n      // always pass filter to allow server-side filtering\n      alwaysPassFilter: () => true,\n      pagination: !!options.pagination,\n      paginationAutoPageSize: options.pagination?.page_size === \"auto\" || options.pagination?.page_size === void 0,\n      paginationPageSizeSelector: options.pagination?.page_size_selector,\n      paginationPageSize: typeof options.pagination?.page_size === \"number\" ? options.pagination.page_size : void 0,\n      animateRows: true,\n      headerHeight: headerHeightPixels,\n      rowHeight: options.row_height,\n      columnDefs: [],\n      rowData: [],\n      rowSelection: explicitSelection,\n      suppressCellFocus: true,\n      enableCellTextSelection: true,\n      theme: themeBalham.withParams({}),\n      onFilterChanged: () => {\n        this.filterModel_ = this.grid_?.getFilterModel() || {};\n        this.requestQuery();\n      },\n      onSortChanged: () => {\n        if (this.grid_) {\n          const sortModel = this.grid_.getColumnState().filter((col) => col.sort).map((col) => ({ colId: col.colId, sort: col.sort }));\n          this.sortModel_ = sortModel;\n          this.requestQuery();\n        }\n      },\n      onSelectionChanged: (event) => {\n        if (explicitSelection !== void 0 && isSelection4(this.options_.as)) {\n          if (event.selectedNodes) {\n            const rowIndices = event.selectedNodes.map((n) => n.rowIndex).filter((n) => n !== null);\n            this.options_.as.update(this.clause(rowIndices));\n          }\n        }\n      },\n      onCellMouseOver: (event) => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          const rowIndex = event.rowIndex;\n          if (rowIndex !== void 0 && rowIndex !== null && rowIndex !== this.currentRow_) {\n            this.currentRow_ = rowIndex;\n            this.options_.as.update(this.clause([rowIndex]));\n          }\n        }\n      },\n      onCellMouseOut: () => {\n        if (hoverSelect && isSelection4(this.options_.as)) {\n          this.currentRow_ = -1;\n          this.options_.as.update(this.clause());\n        }\n      }\n    };\n  }\n  createColumnDef(column2, type) {\n    const columnOptions = this.columnOptions_[column2] || {};\n    const align = columnOptions.align || (type === \"number\" ? \"right\" : \"left\");\n    const headerAlignment = columnOptions.header_align;\n    const formatter = formatterForType(type, columnOptions.format);\n    const sortable = this.options_.sorting !== false && columnOptions.sortable !== false;\n    const filterable = this.options_.filtering !== false && columnOptions.filterable !== false;\n    const resizable = columnOptions.resizable !== false;\n    const minWidth = columnOptions.min_width;\n    const maxWidth = columnOptions.max_width;\n    const autoHeight = columnOptions.auto_height;\n    const autoHeaderHeight = this.options_.header_height === \"auto\" && columnOptions.header_auto_height !== false;\n    const wrapText = columnOptions.wrap_text;\n    const wrapHeaderText = columnOptions.header_wrap_text;\n    const flex = columnOptions.flex;\n    const colDef = {\n      field: column2,\n      headerName: columnOptions.label || column2,\n      headerClass: headerClasses(headerAlignment),\n      cellStyle: { textAlign: align },\n      comparator: (_valueA, _valueB) => {\n        return 0;\n      },\n      filter: !filterable ? false : filterForColumnType(type),\n      flex,\n      sortable,\n      resizable,\n      minWidth,\n      maxWidth,\n      autoHeight,\n      autoHeaderHeight,\n      wrapText,\n      wrapHeaderText,\n      floatingFilter: this.options_.filtering === \"row\",\n      suppressMovable: true,\n      // Disable column moving\n      valueFormatter: (params) => {\n        const value = params.value;\n        if (formatter && value !== null && value !== void 0) {\n          return formatter(value);\n        }\n        return value;\n      }\n    };\n    const width = columnOptions.width;\n    if (width) {\n      colDef.width = width;\n    } else if (flex === void 0 || flex === null) {\n      colDef.flex = 1;\n    }\n    return colDef;\n  }\n  // all mosaic inputs implement this, not exactly sure what it does\n  activate() {\n    if (isSelection4(this.options_.as)) {\n      this.options_.as.activate(this.clause([]));\n    }\n  }\n};\nvar resolveColumns = (columns) => {\n  return columns.map((col) => {\n    if (typeof col === \"string\") {\n      return { column: col };\n    } else if (typeof col === \"object\" && col !== null) {\n      return col;\n    } else {\n      throw new Error(`Invalid column definition: ${col}`);\n    }\n  });\n};\nvar headerClasses = (align) => {\n  if (!align) {\n    return void 0;\n  }\n  return [`header-${align}`];\n};\nvar resolveRowSelection = (options) => {\n  if (options.select === \"hover\") {\n    return void 0;\n  }\n  const selectType = options.select || \"single_row\";\n  if (selectType.startsWith(\"single_\")) {\n    return {\n      mode: \"singleRow\",\n      checkboxes: options.select === \"single_checkbox\",\n      enableClickSelection: options.select === \"single_row\"\n    };\n  } else if (selectType.startsWith(\"multiple_\")) {\n    return {\n      mode: \"multiRow\",\n      selectAll: \"filtered\",\n      checkboxes: options.select === \"multiple_checkbox\"\n    };\n  } else {\n    throw new Error(\"Invalid select option: \" + options.select);\n  }\n};\nvar filterForColumnType = (type) => {\n  switch (type) {\n    case \"number\":\n    case \"integer\":\n    case \"float\":\n    case \"decimal\":\n      return \"agNumberColumnFilter\";\n    case \"date\":\n    case \"datetime\":\n    case \"timestamp\":\n      return \"agDateColumnFilter\";\n    case \"boolean\":\n      return \"agTextColumnFilter\";\n    default:\n      return \"agTextColumnFilter\";\n  }\n};\nvar formatterForType = (type, formatStr) => {\n  switch (type) {\n    case \"integer\":\n      return d3Format.format(formatStr || \",\");\n    case \"number\":\n    case \"float\":\n      return d3Format.format(formatStr || \",.2~f\");\n    case \"decimal\":\n      return d3Format.format(formatStr || \",.4~f\");\n    case \"date\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d\");\n    case \"datetime\":\n    case \"timestamp\":\n      return d3TimeFormat.timeFormat(formatStr || \"%Y-%m-%d %H:%M:%S\");\n    case \"boolean\":\n    case \"string\":\n    default:\n      return void 0;\n  }\n};\nvar filterExpression = (colId, filter, query) => {\n  if (isCombinedSimpleModel(filter)) {\n    const operator = filter.operator === \"AND\" ? and : or;\n    const expressions = filter.conditions?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expressions && expressions.length > 0) {\n      return operator(...expressions);\n    }\n  } else if (isTextFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter, void 0, true);\n  } else if (isNumberFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.filter);\n  } else if (isMultiFilter(filter)) {\n    const expr = filter.filterModels?.map((f) => {\n      return filterExpression(colId, f, query);\n    }).filter((e) => e !== void 0);\n    if (expr && expr.length > 0) {\n      return and(...expr);\n    }\n  } else if (isDateFilter(filter)) {\n    return simpleExpression(colId, filter.type, filter.dateFrom, filter.dateTo || void 0);\n  } else if (isSetFilter(filter)) {\n    console.warn(\"Set filter not implemented\");\n  }\n};\nvar simpleExpression = (colId, type, filter, filterTo = void 0, textColumn = false) => {\n  switch (type) {\n    case \"equals\":\n      return eq(colId, literal(filter));\n    case \"notEqual\":\n      return neq(colId, literal(filter));\n    case \"contains\":\n      if (textColumn) {\n        return sql`${column(colId)} ILIKE ${literal(\"%\" + filter + \"%\")}`;\n      } else {\n        return contains(colId, String(filter));\n      }\n    case \"notContains\":\n      return not(contains(colId, String(filter)));\n    case \"blank\":\n      return isNull(colId);\n    case \"notBlank\":\n      return not(isNull(colId));\n    case \"startsWith\":\n      return prefix(colId, String(filter));\n    case \"endsWith\":\n      return suffix(colId, String(filter));\n    case \"greaterThan\":\n      return gt(colId, literal(filter));\n    case \"lessThan\":\n      return lt(colId, literal(filter));\n    case \"greaterThanOrEqual\":\n      return gte(colId, literal(filter));\n    case \"lessThanOrEqual\":\n      return lte(colId, literal(filter));\n    case \"inRange\":\n      if (filterTo !== void 0 && filterTo !== null) {\n        return gte(colId, literal(filter)), lte(colId, literal(filterTo));\n      }\n      break;\n    default:\n      console.warn(`Unsupported filter type: ${type}`);\n  }\n  return void 0;\n};\nvar isCombinedSimpleModel = (filter) => {\n  return typeof filter === \"object\" && filter !== null && \"operator\" in filter && \"conditions\" in filter && (filter.operator === \"AND\" || filter.operator === \"OR\") && typeof filter.conditions === \"object\";\n};\nvar isTextFilter = (filter) => {\n  return filter?.filterType === \"text\";\n};\nvar isNumberFilter = (filter) => {\n  return filter?.filterType === \"number\";\n};\nvar isDateFilter = (filter) => {\n  return filter?.filterType === \"date\" || filter?.filterType === \"dateString\";\n};\nvar isMultiFilter = (filter) => {\n  return filter?.filterType === \"multi\" && \"filterModels\" in filter;\n};\nvar isSetFilter = (filter) => {\n  return filter?.filterType === \"set\";\n};\n\n// js/inputs/search.ts\nimport {\n  clauseMatch,\n  isParam as isParam4,\n  isSelection as isSelection5\n} from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-core@0.16.2/+esm\";\nimport { Query as Query4 } from \"https://cdn.jsdelivr.net/npm/@uwdata/mosaic-sql@0.16.2/+esm\";\nvar Search = class extends Input {\n  constructor(options_) {\n    super(options_.filterBy);\n    this.options_ = options_;\n    this.element.classList.add(kSidebarFullwidth);\n    if (options_.label) {\n      const inputLabel = window.document.createElement(\"label\");\n      inputLabel.setAttribute(\"for\", this.id_);\n      inputLabel.innerText = options_.label;\n      this.element.appendChild(inputLabel);\n    }\n    this.input_ = window.document.createElement(\"input\");\n    this.input_.autocomplete = \"off\";\n    this.input_.classList.add(kInputSearch);\n    this.input_.id = this.id_;\n    this.input_.type = \"text\";\n    if (this.options_.placeholder) {\n      this.input_.setAttribute(\"placeholder\", this.options_.placeholder);\n    }\n    if (this.options_.width) {\n      this.input_.style.width = `${options_.width}px`;\n    }\n    this.element.appendChild(this.input_);\n    this.input_.addEventListener(\"input\", () => {\n      this.publish(this.input_.value);\n    });\n    if (!isSelection5(this.options_.as)) {\n      this.options_.as.addEventListener(\"value\", (value) => {\n        if (value !== this.input_.value) {\n          this.input_.value = value;\n        }\n      });\n    } else {\n      setupActivationListeners(this, this.input_);\n    }\n  }\n  input_;\n  id_ = generateId();\n  data_ = [];\n  datalist_;\n  reset() {\n    this.input_.value = \"\";\n  }\n  clause(value) {\n    const field = this.options_.field || this.options_.column;\n    return clauseMatch(field, value, { source: this, method: this.options_.type });\n  }\n  activate() {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.activate(this.clause(\"\"));\n    }\n  }\n  publish(value) {\n    if (isSelection5(this.options_.as)) {\n      this.options_.as.update(this.clause(value));\n    } else if (isParam4(this.options_.as)) {\n      this.options_.as.update(value);\n    }\n  }\n  query(filter = []) {\n    return Query4.from(this.options_.from).select({ list: this.options_.column }).distinct().where(...filter);\n  }\n  queryResult(data) {\n    this.data_ = data;\n    return this;\n  }\n  update() {\n    const list = document.createElement(\"datalist\");\n    const id = `${this.id_}_list`;\n    list.setAttribute(\"id\", id);\n    for (const d of this.data_) {\n      const opt = document.createElement(\"option\");\n      opt.setAttribute(\"value\", d.list);\n      list.append(opt);\n    }\n    if (this.datalist_) {\n      this.datalist_.remove();\n    }\n    this.element.appendChild(this.datalist_ = list);\n    this.input_.setAttribute(\"list\", id);\n    return this;\n  }\n};\n\n// js/inputs/index.ts\nvar INPUTS = {\n  select: (options) => input(Select, options),\n  slider: (options) => input(Slider, options),\n  search: (options) => input(Search, options),\n  checkbox: (options) => input(Checkbox, options),\n  radio_group: (options) => input(RadioGroup, options),\n  checkbox_group: (options) => input(CheckboxGroup, options),\n  table: (options) => input(Table, options)\n};\n\n// js/context/duckdb.ts\nimport {\n  getJsDelivrBundles,\n  selectBundle,\n  AsyncDuckDB,\n  ConsoleLogger,\n  LogLevel\n} from \"https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm\";\n\n// js/util/async.ts\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// js/context/duckdb.ts\nasync function initDuckdb() {\n  const JSDELIVR_BUNDLES = getJsDelivrBundles();\n  const bundle = await selectBundle(JSDELIVR_BUNDLES);\n  const worker_url = URL.createObjectURL(\n    new Blob([`importScripts(\"${bundle.mainWorker}\");`], {\n      type: \"text/javascript\"\n    })\n  );\n  const worker = new Worker(worker_url);\n  const logger = new ConsoleLogger(LogLevel.WARNING);\n  const db = new AsyncDuckDB(logger, worker);\n  await db.instantiate(bundle.mainModule, bundle.pthreadWorker);\n  URL.revokeObjectURL(worker_url);\n  return { db, worker };\n}\nasync function waitForTable(conn, table, { interval = 250 } = {}) {\n  while (true) {\n    try {\n      const res = await conn.query(\n        `SELECT 1\n           FROM information_schema.tables\n         WHERE table_schema = 'main'\n           AND table_name   = '${table}'\n         LIMIT 1`\n      );\n      if (res.numRows) return;\n    } catch (err) {\n      console.log(\n        `Table ${table} not yet available, trying again in ${interval}ms (error: ${err})`\n      );\n    }\n    await sleep(interval);\n  }\n}\n\n// js/util/errors.ts\nfunction errorInfo(error) {\n  if (isError(error)) {\n    return {\n      name: error.name || \"Error\",\n      message: error.message || \"An unknown error occurred\",\n      stack: error.stack || \"\",\n      code: error.code || null,\n      ...error\n      // Include any custom properties\n    };\n  } else if (typeof error === \"string\") {\n    return {\n      name: \"Error\",\n      message: error,\n      stack: new Error().stack || \"\",\n      code: null\n    };\n  } else {\n    return {\n      name: \"Unknown Error\",\n      message: JSON.stringify(error, null, 2),\n      stack: new Error().stack || \"\",\n      code: null,\n      originalValue: error\n    };\n  }\n}\nfunction errorAsHTML(error) {\n  const colors = {\n    bg: \"#ffffff\",\n    border: \"#dc3545\",\n    title: \"#dc3545\",\n    text: \"#212529\",\n    subtext: \"#6c757d\",\n    codeBg: \"#f8f9fa\",\n    link: \"#007bff\"\n  };\n  const stackLines = parseStackTrace(error.stack);\n  let html = `\n    <div style=\"\n      background: ${colors.bg};\n      border: 2px solid ${colors.border};\n      border-radius: 8px;\n      padding: 20px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;\n      color: ${colors.text};\n      margin: 10px 0;\n      box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    \">\n      <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 10px;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"${colors.title}\" stroke-width=\"2\" fill=\"none\"/>\n          <path d=\"M12 8v5m0 4h.01\" stroke=\"${colors.title}\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        <h3 style=\"margin: 0; color: ${colors.title}; font-size: 20px; font-weight: 600;\">\n          ${escapeHtml(error.name)}\n        </h3>\n      </div>\n      \n      <div style=\"\n        background: ${colors.codeBg};\n        padding: 15px;\n        border-radius: 6px;\n        margin-bottom: 15px;\n        border-left: 4px solid ${colors.border};\n      \">\n        <p style=\"margin: 0; font-size: 13px; line-height: 1.5; font-family: monospace; white-space: pre-wrap;\">${escapeHtml(error.message)}</p>\n      </div>`;\n  if (error.code !== null) {\n    html += `\n      <div style=\"margin-bottom: 10px;\">\n        <span style=\"color: ${colors.subtext}; font-size: 143x;\">Error Code:</span>\n        <span style=\"color: ${colors.text}; font-weight: 500; margin-left: 8px;\">\n          ${escapeHtml(String(error.code))}\n        </span>\n      </div>`;\n  }\n  if (stackLines.length > 0) {\n    html += `\n      <details style=\"margin-top: 15px;\">\n        <summary style=\"\n          cursor: pointer;\n          color: ${colors.subtext};\n          font-size: 13px;\n          font-weight: 500;\n          outline: none;\n          user-select: none;\n        \">\n          Stack Trace (${stackLines.length} frames)\n        </summary>\n        <div style=\"margin-top: 10px; font-size: 13px; font-family: monospace;\">`;\n    stackLines.forEach((line, i) => {\n      html += `\n        <div style=\"\n          background: ${i % 2 === 0 ? colors.codeBg : \"transparent\"};\n          border-radius: 4px;\n          margin: 2px 0;\n          display: flex;\n          align-items: center;\n        \">\n          <span style=\"color: ${colors.subtext}; min-width: 24px;\">${i + 1}.</span>\n          <span style=\"color: ${colors.link}; margin-left: 8px;\">\n            ${escapeHtml(line)}\n          </span>\n        </div>`;\n    });\n    html += `\n        </div>\n      </details>`;\n  }\n  html += `</div>`;\n  return html;\n}\nfunction displayRenderError(error, renderEl) {\n  const errorHTML = errorAsHTML(error);\n  if (isNotebook()) {\n    renderEl.setAttribute(\"style\", \"\");\n    renderEl.innerHTML = errorAsHTML(error);\n  } else {\n    showErrorModal(errorHTML);\n  }\n}\nfunction parseStackTrace(stack) {\n  if (!stack) return [];\n  const lines = stack.split(\"\\n\");\n  const functions = [];\n  const patterns = [\n    // Chrome/Edge: \"    at functionName (file:line:column)\"\n    /^\\s*at\\s+(.+?)\\s+\\(/,\n    // Chrome/Edge: \"    at file:line:column\" (anonymous)\n    /^\\s*at\\s+[^(]+$/,\n    // Firefox/Safari: \"functionName@file:line:column\"\n    /^(.+?)@/\n  ];\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed === \"Error\") continue;\n    let functionName = \"anonymous\";\n    for (const pattern of patterns) {\n      const match = trimmed.match(pattern);\n      if (match) {\n        if (match[1]) {\n          functionName = match[1].trim();\n        }\n        break;\n      }\n    }\n    if (functionName === \"anonymous\" && !patterns.some((p) => p.test(trimmed))) {\n      functionName = trimmed;\n    }\n    functions.push(functionName);\n  }\n  return functions;\n}\nfunction escapeHtml(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\nfunction isVSCodeNotebook() {\n  return window.location.protocol === \"vscode-webview:\" && window.location.search.includes(\"purpose=notebookRenderer\");\n}\nfunction isNotebook() {\n  const win = window;\n  const hasNotebookGlobal = typeof win.Jupyter !== \"undefined\" || typeof win._JUPYTERLAB !== \"undefined\" || typeof win.google !== \"undefined\" && win.google.colab || typeof win.IPython !== \"undefined\" || typeof win.mo !== \"undefined\" || typeof win.acquireVsCodeApi !== \"undefined\";\n  return hasNotebookGlobal || isVSCodeNotebook();\n}\nfunction isError(value) {\n  return value instanceof Error;\n}\nvar activeModal = null;\nfunction showErrorModal(htmlContent) {\n  if (activeModal) {\n    activeModal.remove();\n  }\n  const backdrop = document.createElement(\"div\");\n  backdrop.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        padding-top: 200px;\n        padding-left: 20px;\n        padding-right: 20px;\n        box-sizing: border-box;\n    `;\n  const modal = document.createElement(\"div\");\n  modal.style.cssText = `\n        max-width: 80vw;\n        max-height: 80vh;\n        overflow-y: auto;\n        position: relative;\n    `;\n  const closeButton = document.createElement(\"button\");\n  closeButton.innerHTML = \"&times;\";\n  closeButton.style.cssText = `\n        position: absolute;\n        top: 15px;\n        right: 10px;\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 4px;\n        transition: background-color 0.2s;\n        z-index: 1;\n    `;\n  closeButton.onmouseover = () => {\n    closeButton.style.backgroundColor = \"#f0f0f0\";\n  };\n  closeButton.onmouseout = () => {\n    closeButton.style.backgroundColor = \"transparent\";\n  };\n  const contentWrapper = document.createElement(\"div\");\n  contentWrapper.innerHTML = htmlContent;\n  modal.appendChild(closeButton);\n  modal.appendChild(contentWrapper);\n  backdrop.appendChild(modal);\n  backdrop.onclick = (e) => {\n    if (e.target === backdrop) {\n      backdrop.remove();\n      activeModal = null;\n    }\n  };\n  closeButton.onclick = () => {\n    backdrop.remove();\n    activeModal = null;\n  };\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\" && activeModal) {\n      backdrop.remove();\n      activeModal = null;\n      document.removeEventListener(\"keydown\", handleEscape);\n    }\n  };\n  document.addEventListener(\"keydown\", handleEscape);\n  document.body.appendChild(backdrop);\n  activeModal = backdrop;\n}\n\n// js/context/index.ts\nvar VizContext = class extends InstantiateContext {\n  constructor(worker, conn_, plotDefaults) {\n    super({ plotDefaults });\n    this.conn_ = conn_;\n    this.api = { ...this.api, ...INPUTS };\n    this.coordinator.databaseConnector(wasmConnector({ connection: this.conn_ }));\n    worker.addEventListener(\"message\", (event) => {\n      if (event.data.type === \"ERROR\") {\n        this.workerErrors_.push(errorInfo(event.data.data.message));\n      }\n    });\n  }\n  tables_ = /* @__PURE__ */ new Set();\n  workerErrors_ = [];\n  async insertTable(table, data) {\n    await this.conn_?.insertArrowFromIPCStream(data, {\n      name: table,\n      create: true\n    });\n    this.tables_.add(table);\n  }\n  async waitForTable(table) {\n    await waitForTable(this.conn_, table);\n  }\n  async collectWorkerError(wait = 1e3) {\n    const startTime = Date.now();\n    while (Date.now() - startTime < wait) {\n      if (this.workerErrors_.length > 0) {\n        return this.workerErrors_.shift();\n      }\n      await sleep(100);\n    }\n    return void 0;\n  }\n};\nvar VIZ_CONTEXT_KEY = Symbol.for(\"@@inspect-viz-context\");\nasync function vizContext(plotDefaults) {\n  const globalScope = typeof window !== \"undefined\" ? window : globalThis;\n  if (!globalScope[VIZ_CONTEXT_KEY]) {\n    globalScope[VIZ_CONTEXT_KEY] = (async () => {\n      const { db, worker } = await initDuckdb();\n      const conn = await db.connect();\n      return new VizContext(worker, conn, plotDefaults);\n    })();\n  }\n  return globalScope[VIZ_CONTEXT_KEY];\n}\n\n// js/widgets/mosaic.ts\nasync function render({ model, el }) {\n  const spec = JSON.parse(model.get(\"spec\"));\n  const plotDefaultsSpec = { plotDefaults: spec.plotDefaults, vspace: 0 };\n  const plotDefaultsAst = parseSpec(plotDefaultsSpec);\n  const ctx = await vizContext(plotDefaultsAst.plotDefaults);\n  const tables = model.get(\"tables\") || {};\n  await syncTables(ctx, tables);\n  el.classList.add(\"mosaic-widget\");\n  const renderOptions = renderSetup(el);\n  const inputs = new Set(Object.keys(INPUTS));\n  if (renderOptions.autoFillScrolling && isPlotSpec(spec)) {\n    el.style.width = \"100%\";\n    el.style.height = \"400px\";\n  }\n  const renderSpec = async () => {\n    try {\n      const targetSpec = renderOptions.autoFill ? responsiveSpec(spec, el) : spec;\n      const ast = parseSpec(targetSpec, { inputs });\n      const specEl = await astToDOM(ast, ctx);\n      el.innerHTML = \"\";\n      el.appendChild(specEl);\n      await handleWorkerErrors(ctx, el);\n    } catch (e) {\n      console.error(e);\n      const error = errorInfo(e);\n      el.innerHTML = errorAsHTML(error);\n    }\n  };\n  await renderSpec();\n  if (renderOptions.autoFill && !isInputSpec(spec)) {\n    const resizeObserver = new ResizeObserver(throttle2(renderSpec));\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }\n}\nasync function syncTables(ctx, tables) {\n  for (const [tableName, base64Data] of Object.entries(tables)) {\n    if (base64Data) {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      await ctx.insertTable(tableName, bytes);\n    } else {\n      await ctx.waitForTable(tableName);\n    }\n  }\n}\nfunction renderSetup(containerEl) {\n  const widgetEl = containerEl.closest(\".widget-subarea\");\n  if (widgetEl) {\n    widgetEl.style.marginBottom = \"0\";\n  }\n  const autoFill = window.document.body.classList.contains(\"quarto-dashboard\");\n  const autoFillScrolling = autoFill && !window.document.body.classList.contains(\"dashboard-fill\");\n  return { autoFill, autoFillScrolling };\n}\nfunction responsiveSpec(spec, containerEl) {\n  const kLegendWidth = 80;\n  const kLegendHeight = 35;\n  spec = structuredClone(spec);\n  if (\"hconcat\" in spec && spec.hconcat.length == 1) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] ? hconcat[0] : null;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"hconcat\" in spec && spec.hconcat.length == 2) {\n    const hconcat = spec.hconcat;\n    const plot = \"plot\" in hconcat[0] && \"legend\" in hconcat[1] ? hconcat[0] : \"plot\" in hconcat[1] && \"legend\" in hconcat[0] ? hconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth - (spec.hconcat.length > 1 ? kLegendWidth : 0);\n      plot.height = containerEl.clientHeight;\n    }\n  } else if (\"vconcat\" in spec && spec.vconcat.length == 2) {\n    const vconcat = spec.vconcat;\n    const plot = \"plot\" in vconcat[0] && \"legend\" in vconcat[1] ? vconcat[0] : \"plot\" in vconcat[1] && \"legend\" in vconcat[0] ? vconcat[1] : void 0;\n    if (plot) {\n      plot.width = containerEl.clientWidth;\n      plot.height = containerEl.clientHeight - (spec.vconcat.length > 1 ? kLegendHeight : 0);\n    }\n  }\n  return spec;\n}\nfunction isPlotSpec(spec) {\n  if (\"plot\" in spec) {\n    return true;\n  } else if (\"input\" in spec && spec.input === \"table\") {\n    return true;\n  } else if (\"hconcat\" in spec && spec.hconcat.length === 2 && (\"plot\" in spec.hconcat[0] || \"plot\" in spec.hconcat[1])) {\n    return true;\n  } else if (\"vconcat\" in spec && spec.vconcat.length === 2 && (\"plot\" in spec.vconcat[0] || \"plot\" in spec.vconcat[1])) {\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isInputSpec(spec) {\n  return \"input\" in spec && spec.input !== \"table\";\n}\nasync function astToDOM(ast, ctx) {\n  for (const [name, node] of Object.entries(ast.params)) {\n    if (!ctx.activeParams.has(name)) {\n      const param = node.instantiate(ctx);\n      ctx.activeParams.set(name, param);\n    }\n  }\n  return ast.root.instantiate(ctx);\n}\nasync function handleWorkerErrors(ctx, widgetEl) {\n  const emptyPlotDivs = widgetEl.querySelectorAll(\"div.plot:empty\");\n  for (const emptyDiv of emptyPlotDivs) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      displayRenderError(error, emptyDiv);\n    }\n  }\n  const emptyTables = widgetEl.querySelectorAll(\"tbody:empty\");\n  for (const emptyTable of emptyTables) {\n    const error = await ctx.collectWorkerError();\n    if (error) {\n      const container = emptyTable.closest(\"div\");\n      if (container) {\n        displayRenderError(error, container);\n      }\n    }\n  }\n}\nvar mosaic_default = { render };\nexport {\n  mosaic_default as default\n};\n","_model_module":"anywidget","_model_module_version":"~0.9.*","_model_name":"AnyModel","_view_count":null,"_view_module":"anywidget","_view_module_version":"~0.9.*","_view_name":"AnyView","layout":"IPY_MODEL_a1a323b055474eb4b0b07b69b1a7b20f","spec":"","tabbable":null,"tables":{},"tooltip":null}},"f6d3809925554f80842e79320dc6fe91":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}}},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/meridianlabs-ai\.github\.io\/inspect_viz");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            trigger: 'click',
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            positionFixed: true,
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../examples/bias-parameter/index.html" class="pagination-link" aria-label="Bias Parameter">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Bias Parameter</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../examples/athletes-regression/index.html" class="pagination-link" aria-label="Athletes (Regression)">
        <span class="nav-page-text">Athletes (Regression)</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Seattle Weather"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Select a horizontal range on the dot pot to filter the contents of the bar plot. Click the legend or the bar plot to filter by weather conditions.</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> inspect_viz <span class="im">import</span> Data, Selection</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> inspect_viz.interactor <span class="im">import</span> Brush, highlight, interval_x, toggle_y</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> inspect_viz.plot <span class="im">import</span> legend, plot, plot_defaults</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> inspect_viz.mark <span class="im">import</span> bar_x, dot</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> inspect_viz.transform <span class="im">import</span> count, date_month_day</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>seattle <span class="op">=</span> Data.from_file(<span class="st">"seattle-weather.parquet"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># plot defaults</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> [<span class="st">"sun"</span>, <span class="st">"fog"</span>, <span class="st">"drizzle"</span>, <span class="st">"rain"</span>, <span class="st">"snow"</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>plot_defaults(</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    color_domain<span class="op">=</span>weather,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    color_range<span class="op">=</span>[<span class="st">"#e7ba52"</span>, <span class="st">"#a7a7a7"</span>, <span class="st">"#aec7e8"</span>, <span class="st">"#1f77b4"</span>, <span class="st">"#9467bd"</span>]</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># selections (scatter x-range and bar/legend click)</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="bu">range</span> <span class="op">=</span> Selection(<span class="st">"intersect"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>click <span class="op">=</span> Selection(<span class="st">"single"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>plot(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    dot(</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>seattle,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        filter_by<span class="op">=</span>click,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>date_month_day(<span class="st">"date"</span>),</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"temp_max"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        fill<span class="op">=</span><span class="st">"weather"</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        fill_opacity<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        r<span class="op">=</span><span class="st">"precipitation"</span>,</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    interval_x(target<span class="op">=</span><span class="bu">range</span>, brush<span class="op">=</span>Brush(fill<span class="op">=</span><span class="st">"none"</span>, stroke<span class="op">=</span><span class="st">"#888"</span>)),</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    highlight(by<span class="op">=</span><span class="bu">range</span>, fill<span class="op">=</span><span class="st">"#ccc"</span>, fill_opacity<span class="op">=</span><span class="fl">0.2</span>),</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span>legend(<span class="st">"color"</span>, target<span class="op">=</span>click),</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    xy_domain<span class="op">=</span><span class="st">"fixed"</span>,</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    x_tick_format<span class="op">=</span><span class="st">"%b"</span>,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    r_domain<span class="op">=</span><span class="st">"fixed"</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    r_range<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">10</span>]</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>plot(</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    bar_x(seattle, x<span class="op">=</span>count(), y<span class="op">=</span><span class="st">"weather"</span>, fill<span class="op">=</span><span class="st">"#ccc"</span>, fill_opacity<span class="op">=</span><span class="fl">0.2</span>),</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    bar_x(seattle, filter_by<span class="op">=</span><span class="bu">range</span>, x<span class="op">=</span>count(), y<span class="op">=</span><span class="st">"weather"</span>, fill<span class="op">=</span><span class="st">"weather"</span>),</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    toggle_y(target<span class="op">=</span>click),</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    highlight(by<span class="op">=</span>click),</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    x_domain<span class="op">=</span><span class="st">"fixed"</span>,</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    y_domain<span class="op">=</span>weather,</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    y_label<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">200</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/">
<p>Meridian Labs</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/inspect_viz">
<p>Code</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/inspect_viz/blob/main/LICENSE">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/inspect_viz/issues">
<p>Issues</p>
</a>
  </li>  
</ul>
    <div class="toc-actions"><ul><li><a href="https://github.com/meridianlabs-ai/inspect_viz/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/meridianlabs-ai/inspect_viz">
<p>Code</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>